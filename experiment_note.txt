


[grow_tree] 
1) use `compute_build_turns` to build city tile;
2) add lock detection;
3) add neighbor cluster weight for cluster assignment;
4) add global bias weight;
5) support push opponent unit out of resource cluster;
6) Exhaust resource only when competing with an opponent.;
7) tons of bug fix



>> run_2021_1028_17_defend_CP

opponent_name	defend_agent	rebuild
short_name
defend_agent	0.0	33.3
rebuild	66.7	0.0

win_loss	win	loss	total	win_pct
short_name	map_size
rebuild	12	26	21	47	55.3
16	32	27	59	54.2
24	47	22	69	68.1
32	49	7	56	87.5


>> run_2021_1028_00_unlock_oppo

opponent_name	defend_agent	rebuild_player_lock
short_name
defend_agent	0.0	20.3
rebuild_player_lock	80.1	0.0

	win_loss	win	loss	total	win_pct
short_name	map_size
defend_agent	12	12	35	47	25.5
16	16	43	59	27.1
24	14	55	69	20.3
32	5	51	56	8.9
rebuild_player_lock	12	36	11	47	76.6
16	43	16	59	72.9
24	55	14	69	79.7
32	51	5	56	91.1



>> run_2021_1028_00_cluster_pin
- pin agent to cluster with small weight

opponent_name	defend_agent	rebuild
short_name
defend_agent	0.0	23.8
rebuild	76.2	0.0

win_loss	win	loss	total	win_pct
short_name	map_size
rebuild	12	31	16	47	66.0
16	40	19	59	67.8
24	54	15	69	78.3
32	51	5	56	91.1


>> run_2021_1028_03_fix_build_turns: **FANTASTIC**

opponent_name	defend_agent	grow_tree
short_name
defend_agent	0.0	15.6
grow_tree	84.4	0.0

win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree
12	36	11	47	76.6
16	47	12	59	79.7
24	59	10	69	85.5
32	53	3	56	94.6



>> run_2021_1027_12_dist_res
 opponent_name	defend_agent	distribute_resource
short_name
defend_agent	0.0	35.1
distribute_resource	64.9	0.0

win_loss	win	loss	total	win_pct
short_name	map_size
distribute_resource
12	25	22	47	53.2
16	33	26	59	55.9
24	50	19	69	72.5
32	42	14	56	75.0


>> run_2021_1027_09
- revert build_city_wt
- revert constant fuel wt

opponent_name	defend_agent	grow_tree_fast_n9
short_name
defend_agent	0.0	32.9
grow_tree_fast_n9	67.1	0.0

win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_fast_n9
12	29	18	47	61.7
16	35	24	59	59.3
24	49	20	69	71.0
32	42	14	56	75.0


>> run_2021_1027_00
- revert to build city agent
  * always use exhaust mode
  * linear city weight
  * not_full_woker_goto_city = 80
  * ignore size 1 citytile
  * build_city_weight = r=1.07

opponent_name	defend_agent	grow_tree_fast_n9
short_name
defend_agent	0.0	41.1
grow_tree_fast_n9	58.9	0.0


>> run_2021_1026_20
* revert city tile weight
* reomve CP point build

(not full check)
opponent_name	defend_agent	grow_tree_fast_n9
defend_agent	0.0	51.4
grow_tree_fast_n9	48.6	0.0


>> run_2021_1026_16
* fix some CP behaviour

(not full check)
opponent_name	defend_agent	grow_tree_fast_n9
short_name
defend_agent	0.0	45.1
grow_tree_fast_n9	54.9	0.0



>> run_2021_1025_07:
* support sustain mode
* unlock with opponent unit when at uncluster location.

>> run_2021_1024_23: offender detector v2: connection point behaviour
(large regression)

* inc city_survive_boost: log to linear
* multiple landing points
* lower opponent_weight at connection point: *0.6, reset to 0 before night
* reset build_city_bonus for cluster owner at is_connection_point
* Support connection point city building

opponent_name	defend_agent	grow_tree_fast_n9
short_name
defend_agent	0.0	54.1
grow_tree_fast_n9	46.3	0.0

win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_fast_n9	12	21	26	47	44.7
16	23	36	59	39.0
24	33	36	69	47.8
32	30	26	56	53.6


>> run_2021_1024_14: add offender detector v1
* initial version of offender detection

opponent_name	defend_agent	grow_tree_fast_n9
short_name
defend_agent	0.0	27.3
grow_tree_fast_n9	72.7	0.0

win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_fast_n9
12	28	19	47	59.6
16	36	23	59	61.0
24	57	12	69	82.6
32	47	9	56	83.9



>> run_2021_1023_23: *GOOD*
* add lock lock

opponent_name	defend_agent	grow_tree_fast_n9
short_name
defend_agent	0.0	22.1
grow_tree_fast_n9	77.9	0.0


win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_fast_n9
12	32	15	47	68.1
16	43	16	59	72.9
24	54	15	69	78.3
32	51	5	56	91.1



>> run_2021_1023_18: (*regression*)
* skip target and next move with open_ratio < 0

opponent_name	defend_agent	grow_tree
short_name
defend_agent	0.0	28.1
grow_tree	71.9	0.0

	win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree
12	26	21	47	55.3
16	38	21	59	64.4
24	53	16	69	76.8
32	49	7	56	87.5


>> run_2021_1023_12:
* fix city wont last issue

opponent_name	defend_agent	grow_tree
short_name
defend_agent	0.0	25.5
grow_tree	74.5	0.0

win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree
12	30	17	47	63.8
16	43	16	59	72.9
24	50	19	69	72.5
32	49	7	56	87.5


>> run_2021_1023_08 (keep only two change from 1023_00)
- [] Fix transfer move_and_collect condition.
- [] inc city weight by lowering decay from 4 => 2

opponent_name	defend_agent	grow_tree_fast_n9
short_name
defend_agent	0.0	22.9
grow_tree_fast_n9	77.1	0.0

	win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_fast_n9
12	35	12	47	74.5
16	44	15	59	74.6
24	50	19	69	72.5
32	49	7	56	87.5



>> run_2021_1023_00
- [] Fix transfer move_and_collect condition.
- [] inc city weight by lowering decay from 4 => 2
- [] add one more slot for largest cluster
- [] Fix only not defend opponent unit from inside from connection point

win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_fast_n9
12	30	17	47	63.8
16	43	16	59	72.9
24	55	14	69	79.7
32	50	6	56	89.3

opponent_name	defend_agent	grow_tree_fast_n9
short_name
defend_agent	0.0	22.9
grow_tree_fast_n9	77.1	0.0



>> grow_tree_fast_n9 - R6: run_2021_1022_14
- enable cluster assignment with neighbour clusters
- regression is acceptable

	win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_fast_n9
12	30	17	47	63.8
16	43	16	59	72.9
24	50	19	69	72.5
32	52	4	56	92.9

opponent_name	defend_agent	grow_tree_fast_n9
short_name
defend_agent	0.0	24.2
grow_tree_fast_n9	75.8	0.0




>>>>> grow_tree_fast_n9 - R5: not much regression, not much gain neither
* try add more weight for wood cluster

opponent_name	defend_agent	grow_tree
short_name
defend_agent	0.0	22.9
grow_tree	77.1	0.0

	win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree
12	30	17	47	63.8
16	47	12	59	79.7
24	50	19	69	72.5
32	51	5	56	91.1



>>>>> grow_tree_fast_n9 - R4
* Try exhaust small cluster

opponent_name	defend_agent	grow_tree_fast_n9
short_name
defend_agent	0.0	26.7
grow_tree_fast_n9	73.3	0.0

win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_fast_n9
12	27	19	46	58.7
16	44	11	55	80.0
24	44	19	63	69.8
32	44	9	53	83.0

1634793369907_y3aJiw434PAg, 664701512, a1, defend_agent
- [√] lost wood city
  * large city crash, because of no wood fuel to city
  * exhaust small city.
  * add more weight to city survive boost


>>>> grow_tree_fast - R3
* Try enable city crash wait (reverted for now)

win_loss	win	loss
short_name
grow_tree_fast_n9	74.9	25.1
defend_agent	25.1	74.9

	win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_fast_n9
12	34	13	47	72.3
16	42	17	59	71.2
24	48	21	69	69.6
32	49	7	56	87.5



>>>> grow_tree_fast - R2: run_2021_1021_12
* Add connection point as NRT
* Do not goto NRT if wait turns < 0

opponent_name	defend_agent	grow_tree_fast_n9
short_name
defend_agent	    0.0	    22.5
grow_tree_fast_n9	77.5	0.0

win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_fast_n9
12	28	19	47	59.6
16	49	10	59	83.1
24	51	18	69	73.9
32	51	5	56	91.1


308255806, a1
- [√] t34, crash
  * [√] near non-researched resource tile
  * do not build at first night
- [] t45, u_18 chose uranium NRT (11, 8) instead of (10, 0)
  * fast_cell defend, no easy fix.
- [√] include n9 near resourec tile
  * [√] build city at corner point when cargo full
  * prioritize city building at corner?
  * to build city tile on connection point (at corner)
  * to also defend opponent unit when access from corner
- [√] t5 u2, why goto (8, 8) not (8, 10)
  * lower opponent weight for non-5000 cases
- [√] t22, u9, goto (6, 13)
  * [√] A bug: worker should protecte from outside
  * [√] do not protect inside opponent for connection point
- [√] t29 u_13, goto (6, 14), not (7, 13)
  * [√] turn off various defending rule for connection point
- [√] t27, u_13, goto (7, 14)
  * because (7, 14) is a NRT (build default value and opponent), and city tile (8, 13) has weight 0
  * [√] should make build city bonus 0 when not possible (so to escape the default value of 10)
  * [√] How not to protect a cluster and die worker? wait turns >= 0

13810037, a0
- [√] t65 crash: move onto a NRT of non-researched resource tile was also a tranfer build location.
  * tranfer build should not trigger build city bonus?
- [√] need to add wait turns for build turns


================================================ 2021-10-20 ========================================


>>>> grow_tree_fast - R1
* add wait turns int build_turns estimation.

opponent_name	defend_agent	grow_tree
short_name
defend_agent	0.0	    26.0
grow_tree	    74.0	0.0

win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree
12	30	17	47	63.8
16	43	16	59	72.9
24	50	19	69	72.5
32	48	8	56	85.7


>>>> grow_tree_fast
* Use step to build to decay build city bonus weight.

win_loss	win	loss
short_name
grow_tree	    71.2	28.8
defend_agent	28.8	71.2

	win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree
12	27	20	47	57.4
16	39	18	57	68.4
24	47	17	64	73.4
32	45	9	54	83.3

================================================ 2021-10-18 ========================================

grow_tree_1018_01
(regression on large maps, does improved on small sized maps)

* fix opponent weight to bias opponent direction
* estimate open_ratio at arrival for cluster assignment; use researched resource for turn on exhaust for opponent invade detection
* add default weight for build city tile
* consume wood resource when full
* boost wood full resource tile weight

1634472916023_Hp2djmnkSF1X, a0, 12, defend_agent
- [√] t0 first step not toward opponent
  * a bug due to missing opponent bias weight, fixed
- [√] t49, u_1, goto (11, 4) why?
  * because connected cluster has opponent unit.
  * [√] Fixed by only consider resource researched cluster
- cluster assigntment update
  * [√] estimate the open ratio at arrival
  * [] Eject coal worker to deliver resource
  * [] max 2 worker
- [√] Due with ejectet worker come into city
  * t28, u_1, resource (10, 3), far resource (3, 1)
  * [√] possible to send it to another cluster with default build city tile weight with no decay
- [√] consume wood if it's full, t100
  * [√] turn_on_exhaust when >0.5 resource tile are full
  * [√] inc the resource weight for full resource


opponent_name	defend_agent	grow_tree_1018_01
short_name
defend_agent	0.0	33.1
grow_tree_1018_01	67.4	0.0

	win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_1018_01
12	90	55	145	62.1
16	68	49	117	58.1
24	83	36	119	69.7
32	109	29	138	79.0

Total Matches: 524 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/grow_tree_1018_01/main.py | PfvQdwqvQTGt   | 23.6246746      | μ=25.987, σ=0.787  | 524
/home/flynnwang/dev/playground/versions/defend_agent/main.py | zYzdpGuF3qVL   | 21.6513766      | μ=24.013, σ=0.787  | 524


>>>> grow_tree_1018_01 - R1: could fix the large map error for most cases.
* try remove boost wood full and boost full wood tile


opponent_name	defend_agent	grow_tree_1018_01
defend_agent	0.0	32.5
grow_tree_1018_01	68.0	0.0

	win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_1018_01
12	29	32	61	47.5
16	40	14	54	74.1
24	34	15	49	69.4
32	37	5	42	88.1

Total Matches: 207 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/grow_tree_1018_01/main.py | 8zHhLzWzdQn1   | 24.2349425      | μ=26.655, σ=0.807  | 207
/home/flynnwang/dev/playground/versions/defend_agent/main.py | tY2IQOskaaJ3   | 20.9251210      | μ=23.345, σ=0.807  | 207


>>>> grow_tree_1018_01 - R2:
* use day turns drived by arrival turns for cluster assignment

opponent_name	defend_agent	grow_tree_1018_01
short_name
defend_agent	0.0	30.9
grow_tree_1018_01	69.6	0.0

win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_1018_01
12	25	22	47	53.2
16	37	27	64	57.8
24	33	12	45	73.3
32	56	5	61	91.8

Total Matches: 214 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/grow_tree_1018_01/main.py | YncudSZ2rQF9   | 23.9038177      | μ=26.320, σ=0.805  | 214
/home/flynnwang/dev/playground/versions/defend_agent/main.py | WQ67VneSmPjS   | 21.2632483      | μ=23.680, σ=0.805  | 214


>>>> grow_tree_1018_01 - R2:
* tune avg_build_city_cile_turns = 6 (from 5)

opponent_name	defend_agent	grow_tree_1018_01
short_name
defend_agent	0.0	31.1
grow_tree_1018_01	68.9	0.0

win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_1018_01
12	38	28	66	57.6
16	31	22	53	58.5
24	33	13	46	71.7
32	40	1	41	97.6

Total Matches: 206 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/grow_tree_1018_01/main.py | OFyDWSqF21XV   | 24.1071878      | μ=26.528, σ=0.807  | 206
/home/flynnwang/dev/playground/versions/defend_agent/main.py | HQwApEimrIqj   | 21.0515237      | μ=23.472, σ=0.807  | 206


>>>> grow_tree_1018_01 - R3*
- use larger wait turns threshold for cluster assignment: 8 => 40 (could be larger?)

win_loss	win	loss
short_name
grow_tree_1018_01	74.1	25.9
defend_agent	25.9	74.1

Total Matches: 232 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/grow_tree_1018_01/main.py | E0IaJ0MzEGx4   | 24.4507144      | μ=26.892, σ=0.814  | 232
/home/flynnwang/dev/playground/versions/defend_agent/main.py | bhMilhBp2BNX   | 20.6671491      | μ=23.108, σ=0.814  | 232

	win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_1018_01
12	36	20	56	64.3
16	34	20	54	63.0
24	55	15	70	78.6
32	47	5	52	90.4



>>>> grow_tree_1018_23: regression on large map size
- max=2 for resource cluster assignment inc build city tile

opponent_name	defend_agent	grow_tree_1018_23
short_name
defend_agent	0.0	35.9
grow_tree_1018_23	64.1	0.0

	win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_1018_23
12	10	5	15	66.7
 16	17	20	37	45.9
24	21	4	25	84.0
32	18	8	26	69.2

Total Matches: 100 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/grow_tree_1018_23/main.py | tLQQ6HHOzQee   | 23.3747488      | μ=26.064, σ=0.896  | 100
/home/flynnwang/dev/playground/versions/defend_agent/main.py | l1niW4ME37hR   | 21.2474661      | μ=23.936, σ=0.896  | 100

>>> Test variour opponent bias weight, so far not good.
- if there is still regression, then will reset all change based on


>>>> grow_tree_1019_global_bias:
- cherry-pick opponent bias onto 1018_01 branch

Total Matches: 225 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/grow_tree_1018_23/main.py | O7UE5pfGLkMQ   | 24.2553848      | μ=26.669, σ=0.804  | 225
/home/flynnwang/dev/playground/versions/defend_agent/main.py | ZbUF4MZcPMtT   | 20.9176241      | μ=23.331, σ=0.804  | 225

opponent_name	defend_agent	grow_tree_1018_23
short_name
defend_agent	0.0	30.5
grow_tree_1018_23	70.0	0.0

win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_1018_23
12	27	20	47	57.4
16	40	16	56	71.4
24	48	18	66	72.7
32	41	13	54	75.9






================================================ 2021-10-17 ========================================


grow_tree_version 1:

Total Matches: 995 | Matches Queued: 9
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/grow_tree/main.py | kqO1YSDUQIgV   | 30.6778306      | μ=33.296, σ=0.873  | 383
/home/flynnwang/dev/playground/versions/defend_agent/main.py | SalDKbmlP5LB   | 29.4889249      | μ=32.102, σ=0.871  | 386
/home/flynnwang/dev/playground/versions/simple_defend/main.py | kWtCCUSM0oV0   | 25.2935479      | μ=27.773, σ=0.826  | 344
/home/flynnwang/dev/playground/versions/priority_search/main.py | 9amrzjDuq0tz   | 23.7597759      | μ=26.257, σ=0.832  | 336
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | dfq1pscrx1LT   | 20.2078459      | μ=22.878, σ=0.890  | 280
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | KAJP0l2zHSBW   | 15.4123156      | μ=18.448, σ=1.012  | 261

opponent_name	Tong_Hui_Kang_v4	defend_agent	grow_tree	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	6.8	1.6	9.1	4.0	26.7
defend_agent	93.2	0.0	37.2	83.1	73.3	93.9
grow_tree	98.4	62.8	0.0	80.0	77.9	98.5
priority_search	90.9	16.9	22.5	0.0	38.0	73.4
simple_defend	96.0	26.7	22.1	64.8	0.0	77.4
tranfer_agent_v1	73.3	6.1	1.5	28.1	22.6	0.0




>>> grow_tree: version 2
* should add cell (near resource tile) level opponent boosting
* Use unit.surviving_turns and unit.arrival_turns as estimation when computing nearest unit arrival cluster ids
* add boost score for step weight to force it into position

Total Matches: 882 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/grow_tree/main.py | qrmRqkK27bWP   | 27.1135928      | μ=29.658, σ=0.848  | 334
/home/flynnwang/dev/playground/versions/defend_agent/main.py | mOxDLJdfTbNv   | 26.5917275      | μ=29.160, σ=0.856  | 332
/home/flynnwang/dev/playground/versions/simple_defend/main.py | a4MwRg1P9U90   | 24.2146095      | μ=26.701, σ=0.829  | 326
/home/flynnwang/dev/playground/versions/priority_search/main.py | tnnwHDF2yXvY   | 21.4941848      | μ=23.992, σ=0.833  | 268
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | NOgUw1LhysTL   | 18.5849794      | μ=21.178, σ=0.864  | 267
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | xvLTqvmCLGIM   | 12.4430394      | μ=15.643, σ=1.066  | 237

opponent_name	Tong_Hui_Kang_v4	defend_agent	grow_tree	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	0.0	1.9	8.9	0.0	30.6
defend_agent	100.0	0.0	42.3	80.6	77.9	89.0
grow_tree	98.1	57.7	0.0	75.4	74.4	84.1
priority_search	91.1	19.4	24.6	0.0	37.3	63.6
simple_defend	100.0	22.1	25.6	64.4	0.0	90.2
tranfer_agent_v1	69.4	11.0	15.9	36.4	9.8	0.0



>>> grow_tree: version 3 (small batch evaluation)
* fix BUG!: the return cargo from `consume_worker_resource` changed in later usage.

Total Matches: 259 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/grow_tree/main.py | GgfpjhrildqH   | 28.9753939      | μ=32.113, σ=1.046  | 98
/home/flynnwang/dev/playground/versions/defend_agent/main.py | zJK2kvd0bK35   | 27.1200613      | μ=30.098, σ=0.993  | 105
/home/flynnwang/dev/playground/versions/simple_defend/main.py | TFvOZNFaYIOY   | 24.9566689      | μ=27.963, σ=1.002  | 88
/home/flynnwang/dev/playground/versions/priority_search/main.py | Db65cyH06Rup   | 24.1628558      | μ=27.217, σ=1.018  | 82
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | NPhn5kaUsZmQ   | 17.9249380      | μ=21.575, σ=1.217  | 71
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | KaZwzJNAM4zq   | 12.3023315      | μ=16.895, σ=1.531  | 74

pponent_name	Tong_Hui_Kang_v4	defend_agent	grow_tree	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	5.3	0.0	25.0	0.0	14.3
defend_agent	94.7	0.0	44.4	70.8	60.9	90.9
grow_tree	100.0	55.6	0.0	76.9	68.0	100.0
priority_search	75.0	29.2	23.1	0.0	53.3	90.0
simple_defend	100.0	39.1	32.0	46.7	0.0	63.6
tranfer_agent_v1	85.7	9.1	0.0	10.0	36.4	0.0


>>> grow_tree: test multiple thresholds of cell boosting score

Total Matches: 614 | Matches Queued: 14
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/grow_tree_cell_oppo_500/main.py | YTswfYaMWiJf   | 28.9412206      | μ=31.540, σ=0.866  | 200
/home/flynnwang/dev/playground/versions/grow_tree_cell_oppo_200/main.py | J8n2HsBxE3Mu   | 28.7998478      | μ=31.406, σ=0.869  | 196
/home/flynnwang/dev/playground/versions/defend_agent/main.py | wKt72kDyPIDs   | 26.4405162      | μ=28.964, σ=0.841  | 162
/home/flynnwang/dev/playground/versions/grow_tree_cell_oppo_1000/main.py | 4f98YNsipz8J   | 24.9377922      | μ=27.557, σ=0.873  | 144
/home/flynnwang/dev/playground/versions/simple_defend/main.py | MrUmDG3pjmjY   | 23.5176617      | μ=26.194, σ=0.892  | 142
/home/flynnwang/dev/playground/versions/priority_search/main.py | 2c0zm56OjLHT   | 22.1759927      | μ=24.853, σ=0.892  | 133
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | JnoIcp6OUsdy   | 17.2978743      | μ=20.399, σ=1.034  | 135
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | MuZpBO6M5xQa   | 11.0448483      | μ=14.942, σ=1.299  | 116

opponent_name	Tong_Hui_Kang_v4	defend_agent	grow_tree_cell_oppo_1000	grow_tree_cell_oppo_200	grow_tree_cell_oppo_500	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	5.6	8.3	0.0	0.0	16.7	5.6	6.2
defend_agent	94.4	0.0	52.4	35.9	41.5	69.2	75.0	72.2
grow_tree_cell_oppo_1000	91.7	47.6	0.0	27.3	11.1	71.4	64.3	92.9
grow_tree_cell_oppo_200	100.0	64.1	72.7	0.0	41.0	88.5	77.8	100.0
grow_tree_cell_oppo_500	100.0	58.5	88.9	59.0	0.0	69.6	87.5	100.0
priority_search	83.3	30.8	28.6	11.5	30.4	0.0	27.8	85.0
simple_defend	94.4	25.0	35.7	22.2	12.5	72.2	0.0	80.0
tranfer_agent_v1	93.8	27.8	7.1	0.0	0.0	15.0	20.0	0.0


>>> version4: grow_tree with defend rework + exhaust to invaded cluster
* clearly with regression, specially with transfer_agent_v1


replays/1634197748077_WSLDgyHqSwzP.json	a0 656803065 priority_search
to improve defend near resource strategy, from small to large weight
- add default bias weight to try to move towards opponent unit position: 1e-3 / arrival turns
- add weight to oppo unit getting near to nrt to attract unit: fuel / dd(oppo_arrival)
- move to attack point at all cost. LARGE_VALUE
- [√] Exhaust cluster if invaded by opponent unit.
  * also the cluster should have no open positions.


- [√] t11/u1/ not build on nrt (1, 6), (0, 7)
- [√] t17 u_6, move onto res (0, 8), not stay at (0, 7)
  * opponent weight attrack weight too large

Total Matches: 589 | Matches Queued: 9
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/grow_tree_exhaust/main.py | A3BoI1HkWmjI   | 27.7117914      | μ=30.228, σ=0.839  | 215
/home/flynnwang/dev/playground/versions/defend_agent/main.py | Z6xh5T6wgYkd   | 27.3046700      | μ=29.888, σ=0.861  | 190
/home/flynnwang/dev/playground/versions/grow_tree_non_exhaust/main.py | CMuHTaSZsdhC   | 26.7216439      | μ=29.242, σ=0.840  | 204
/home/flynnwang/dev/playground/versions/simple_defend/main.py | XsOLAZliEnEw   | 24.5027132      | μ=27.088, σ=0.862  | 153
/home/flynnwang/dev/playground/versions/priority_search/main.py | TOsFdACdPi6C   | 22.6872688      | μ=25.374, σ=0.895  | 138
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | AVCknWYLPI78   | 20.1440991      | μ=22.955, σ=0.937  | 138
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | 6oiUqDiP7YZf   | 10.9159514      | μ=14.899, σ=1.328  | 140

opponent_name	Tong_Hui_Kang_v4	defend_agent	grow_tree_exhaust	grow_tree_non_exhaust	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	0.0	0.0	0.0	12.5	0.0	18.2
defend_agent	100.0	0.0	35.7	48.8	73.1	79.3	95.5
grow_tree_exhaust	100.0	64.3	0.0	67.4	73.3	73.7	80.8
grow_tree_non_exhaust	100.0	51.2	39.5	0.0	82.9	58.1	87.5
priority_search	87.5	26.9	26.7	17.1	0.0	22.2	76.9
simple_defend	100.0	20.7	26.3	41.9	77.8	0.0	59.1
tranfer_agent_v1	81.8	4.5	19.2	12.5	23.1	40.9	0.0



>>> version 5:
* Fixed by using build_city_bonus as flag to choose path;
* use arrival_turns < or <= oppo_unit_arrival_turns for opponent_weight;
* add tranfer boosting conflict with history offer positions


replays/1634254980085_uLyc7MitjRhC.json, a0, 815506456 transfer_agent_v1
- [√] t7, u_3, goto (6, 3), not (5, 0)
  * why arrival of (5, 0) is 4? it is 4, because (6, 3) use passing city path
  * [√] Fixed by using build_city_bonus as flag to choose path.
- [√] Should consider arrival order when boost defend weight
- [-] t86, u_5, not interupting oppo unit from entering coal.
  * this is because current cell is strong opponent weight, while the neighobur
    is equal arrival position
- [√] t53, u_5, not arrival but not build city at (8, 2)
  * conflict tranfer build position: solved by filter out conflict position with history offer.


opponent_name	Tong_Hui_Kang_v4	defend_agent	grow_tree	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	0.0	0.0	0.0	0.0	27.8
defend_agent	100.0	0.0	35.1	76.5	69.2	85.7
grow_tree	100.0	64.9	0.0	90.9	85.2	94.1
priority_search	100.0	23.5	9.1	0.0	44.4	66.7
simple_defend	100.0	30.8	14.8	55.6	0.0	100.0
tranfer_agent_v1	72.2	14.3	5.9	33.3	0.0	0.0



Total Matches: 1108 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/grow_tree_exhaust/main.py | wEI0gxTDpqz8   | 30.8643635      | μ=33.415, σ=0.850  | 404
/home/flynnwang/dev/playground/versions/grow_tree_non_exhaust/main.py | zHhPq9x46Mdf   | 29.9085103      | μ=32.470, σ=0.854  | 371
/home/flynnwang/dev/playground/versions/defend_agent/main.py | ATvhm38vAHHk   | 29.5317556      | μ=32.004, σ=0.824  | 356
/home/flynnwang/dev/playground/versions/simple_defend/main.py | A6LUXNEDBvP6   | 25.8475506      | μ=28.338, σ=0.830  | 274
/home/flynnwang/dev/playground/versions/priority_search/main.py | eDsJgxEvaCUp   | 22.6990718      | μ=25.282, σ=0.861  | 270
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | 8oYkpuOQ3Nq9   | 20.6072765      | μ=23.270, σ=0.887  | 279
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | 8qyqnqhjQNfR   | 15.2620284      | μ=18.487, σ=1.075  | 262

opponent_name	Tong_Hui_Kang_v4	defend_agent	grow_tree_exhaust	grow_tree_non_exhaust	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	6.7	1.9	0.0	20.5	3.4	14.3
defend_agent	93.3	0.0	45.1	40.0	85.7	73.2	93.2
grow_tree_exhaust	98.1	58.2	0.0	57.0	92.6	67.8	95.2
grow_tree_non_exhaust	100.0	61.3	44.3	0.0	86.5	78.3	89.5
priority_search	79.5	14.3	7.4	13.5	0.0	30.2	65.8
simple_defend	96.6	26.8	32.2	23.9	72.1	0.0	78.0
tranfer_agent_v1	85.7	6.8	4.8	10.5	34.2	22.0	0.0


>>> grow_tree v6:
* add push: push opponent away from current resource cluster
(regression with new features)

Total Matches: 792 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/grow_tree/main.py | Aim5R32SoKST   | 29.4789643      | μ=32.134, σ=0.885  | 300
/home/flynnwang/dev/playground/versions/defend_agent/main.py | yzZexzmQ6WWw   | 26.4705003      | μ=29.001, σ=0.844  | 314
/home/flynnwang/dev/playground/versions/simple_defend/main.py | RgHjClgJ6EDW   | 24.7608290      | μ=27.210, σ=0.816  | 269
/home/flynnwang/dev/playground/versions/priority_search/main.py | GyBmUuvbrcL6   | 22.8144027      | μ=25.332, σ=0.839  | 254
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | Htl9bhXHHstz   | 17.9588943      | μ=20.687, σ=0.909  | 238
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | 2sapaaenDG9W   | 14.5199759      | μ=17.630, σ=1.037  | 209


opponent_name	Tong_Hui_Kang_v4	defend_agent	grow_tree	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	3.6	0.0	9.1	10.3	23.8
defend_agent	96.4	0.0	42.6	74.0	66.7	93.2
grow_tree	100.0	57.4	0.0	80.6	69.0	93.8
priority_search	90.9	26.0	19.4	0.0	34.5	73.3
simple_defend	89.7	33.3	32.8	67.2	0.0	88.4
tranfer_agent_v1	76.2	6.8	6.2	26.7	11.6	0.0


(with defend_agent)
    	win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree
12	8	10	18	44.4
16	8	12	20	40.0
24	7	2	9	77.8
32	16	5	21	76.2


>>> grow_tree v7: improved a little
- fix build_city_wt weight decay, demote build_city_wt at night
- wait to build when resource researched

Total Matches: 258 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/grow_tree_1017_18/main.py | dURp3Ynuo7Av   | 23.7836300      | μ=26.156, σ=0.791  | 258
/home/flynnwang/dev/playground/versions/defend_agent/main.py | 4LZaBGqdmFjf   | 21.4710971      | μ=23.844, σ=0.791  | 258

opponent_name	defend_agent	grow_tree_1017_18
defend_agent	0.0	36.1
grow_tree_1017_18	65.0	0.0

    	win_loss	win	loss	total	win_pct
short_name	map_size
grow_tree_1017_18
12	40	45	85	47.1
16	41	25	66	62.1
24	29	18	47	61.7
32	61	4	65	93.8



replays/1634307380290_Fu4SmJPf2FLx.json, 775155700, a1, defend_agent
- [] Use the same boost weight for equal sign with opponent_weight
  * use larger weight for opponent weight resoruce weight
- [] Use decay for opponent_weight on nrt cell
- [√] t8, u4, goto nrt(10, 7), not (11, 6)
  * too much weight for weak_oppo_boost
- [√] t20 goto (11, 6), not (10, 4)
  * city tile survive weight too large
- [√] t14, u8, goto (0, 0) ont (11, 8)
  * bug of is_target_move_may_fail
  * [-] t14, u8, move to (10, 4), not (11, 8): correct, due to how enemy move.
  * [√] u2, t29, goto (11, 5) not (9, 5): deficient wood tile with empty fuel
- [√] t34, u10, goto (9, 8) not (11, 8)
  * fix city_last_turns (should +1)
- [√] u16, moving back and forth for (9, 9)t29 and (11, 8)@t28
  * because of city_last_turns - arrival_turns_wo_city <= 6
  * [√] use larger city decay weight
- [√] t26 u10/u15, (9, 10), (10, 10), (10, 9)
  * becuase u10 triggered build city weight while u15 didn't
  * [√] amout * 3 for build city boosting
  * [√] demote nrt next to player citytile.
- [√] t161, u_10, not saving city (9, 10), (1, 11)
  * cluster owner stick on current cluster.
  * [√] fix cluster owner weight with >= 1 player city only when cluster size >= 2


1634420981289_m7XWd03g1J0r, 436556433, a1, defend_agent
- [] city weight lockdown
- [√] t10, u4, goto (1, 5) not (3, 6)
  * [√] build city should have top priority.
  * [√] t7, goto (3, 6), sholud stay (0, 6)
  * drop build city bonus demote rule for nb citytile.
  * [] Do not build city on opponent unit NRT
- [√] t21, u9, goto opponent unit (3, 3)
  * no opponent on turn 21
- [√] t7, u2, goto (1, 5) not (0, 6)
  * [√] add more push weight for NRT
- [√] t10, goto (1, 5), not (3, 6)
  * lower r for build_city_bonus (1.8->1.5) and inc opponent_weight r (1.1->1.2)
  * has room for further optimization
- u_4, going one city (3, 6) and going another (1, 5)
- []! t59/u10 wait for researched to coal and urnaium to build city tile.
  * [√] wait to build when resource researched

1634413151759_c9Uv6L06JDSy, 332552175, a0, defend_agent
- [√] t8, u3, goto (10, 5), not stay (11, 4)
  * BUG: build city weight not decay correctly
- [√] t33, u8, goto (11, 5), not (9, 5)
  * build city bonus is larger than city crash weight
  * [√] Fixed by lower build city bonus at night
- [-] t47, u9, target (10, 3) not (11, 5)
  * why (11, 5) is not a opponent defend position
  * because (11, 5) is not nearest NRT for oppo u5
- [√] t78 u_9 why not moving to city boundary.
  * because default resource weight does not have dist decay
- [-] t79, t80, why weight so large, >8000? (4, 4)
  * cluster weight




======================================= 2021-10-11 ==============================================

1633768368043_qeFNY225VyVF, 293079651, a0, simple_defend
- [√] t10/u3 staying at coal cell with 100 wood, not moving.
  * it's tracked by the resource weight
  * [-] A) inc threshold build_city_bonus
  * [√] B) use unit info for resource weight
  * >> Think about weight for resource tile and near resource tile.
- [-] u8 t49 moving away from nrt (2, 7) to (3, 7)
  * triggered opponent weight at (3, 7)
- [√] Test add size=1 cluster and drop min city count for cluster assignment.
- [√] Test split different weight for < and == opponent_weight
  * This will help with collision break: to move to other near resource tile that can help.



1633776682734_pYgXffrP3Ogs, 416249851, a1, simple_defend
- [√] t11, u_1 with 40, should not goto resource tile but wait.
  * u_1 wood=40, move to resource and back to build need 5 turns, while wait need only 4
  * for wood >= 2, both move and wait need 5 turns, choose to wait.
- [√] t11, u_2, move to nrt (9, 11), but prefer (9, 8)
  * try to split threaten defend weight and nearest point defend weight
  * [√] Add 501/21 separate for nrt and rt threaten boost.
  * [√] Double threaten dist at night!


opponent_name	Tong_Hui_Kang_v4	defend_agent	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	1.3	6.1	7.1	10.0	22.9
defend_agent	98.7	0.0	51.5	84.0	70.7	87.8
lux_perspective	93.9	50.0	0.0	81.8	69.6	90.3
priority_search	92.9	16.0	18.2	0.0	42.9	68.8
simple_defend	90.0	29.3	30.4	60.7	0.0	91.2
tranfer_agent_v1	77.1	12.2	9.7	31.2	10.5	0.0

Total Matches: 912 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/defend_agent/main.py | hYoxE34HXqWM   | 30.5388760      | μ=33.122, σ=0.861  | 350
/home/flynnwang/dev/playground/lux_perspective/main.py | vAB8YTYDyBXy   | 28.6247210      | μ=31.152, σ=0.842  | 342
/home/flynnwang/dev/playground/versions/simple_defend/main.py | E0hz6q0afeQf   | 26.7983082      | μ=29.258, σ=0.820  | 325
/home/flynnwang/dev/playground/versions/priority_search/main.py | RsjhiEoWCyKS   | 24.3931984      | μ=26.889, σ=0.832  | 287
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | qyD1loqPcDRK   | 21.5729811      | μ=24.166, σ=0.864  | 251
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | 4rVKGxPD2P41   | 17.5555168      | μ=20.582, σ=1.009  | 269


(why regression?)


1633907441404_ll5yuRv0Zstu, 115367527, a1, simple
- [√] Test revert threaten boost.
- t4, u2, move back to (7, 8), not (5, 7)


1633905665683_LcRNpDTPNRdt, 66476846, a1, simple
- t5, u2, back and forth (5, 11), (6, 11)
  * conflict between cluster weight and opponent boosting rule.
  * [√] keep open ratio = 1 when unit arrived at cluster
  * [√] lower opponent weight to be smaller than cluster boosting.
  * [√] check cluster has player citytile <= 1 to boost
  * [-]! instead of elemeninating the cluster, how about make it avialbe for all the unit?
    > not OK, then the cluster assignment is not really working
- [√] t100, not saving large city
  * bug? only use small city crash boost and survive boost for sz=1 wood city tile.


1633892893627_2sURrL14kBSC
- t14, u_2, cluster assingment issue
  [√] Bug: should use open_rate of 1 for both boundary and resource positions.

Total Matches: 429 | Matches Queued: 11
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | InbY1heOoZtd   | 29.3118006      | μ=32.234, σ=0.974  | 178
/home/flynnwang/dev/playground/versions/defend_agent/main.py | 3mJBQhUHNuuv   | 26.8116693      | μ=29.565, σ=0.918  | 170
/home/flynnwang/dev/playground/versions/simple_defend/main.py | vQGBlwshsqYU   | 24.3399166      | μ=27.087, σ=0.916  | 137
/home/flynnwang/dev/playground/versions/priority_search/main.py | RMgnlFRbXDkf   | 20.5853126      | μ=23.398, σ=0.938  | 128
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | 8FQOLZPp7orD   | 17.5554161      | μ=20.743, σ=1.063  | 123
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | g4vNFeftrm9g   | 12.2007661      | μ=16.047, σ=1.282  | 122

opponent_name	Tong_Hui_Kang_v4	defend_agent	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	10.7	0.0	25.0	0.0	0.0
defend_agent	89.3	0.0	20.4	83.9	79.4	96.7
lux_perspective	100.0	79.6	0.0	87.9	72.7	97.1
priority_search	75.0	16.1	12.1	0.0	34.6	61.1
simple_defend	100.0	20.6	27.3	65.4	0.0	95.5
tranfer_agent_v1	100.0	3.3	2.9	38.9	4.5	0.0

(still observe some regression with simple_defend)


- Keep skip size=1 wood cluster

Total Matches: 617 | Matches Queued: 9
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | cHuwp7ETvPIQ   | 30.1983221      | μ=33.042, σ=0.948  | 241
/home/flynnwang/dev/playground/versions/defend_agent/main.py | ter9H2R1wpvi   | 27.6691828      | μ=30.288, σ=0.873  | 242
/home/flynnwang/dev/playground/versions/simple_defend/main.py | pohtecxLIjeJ   | 24.3992050      | μ=27.025, σ=0.875  | 220
/home/flynnwang/dev/playground/versions/priority_search/main.py | 95RampagLhmD   | 21.5378384      | μ=24.217, σ=0.893  | 181
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | B70Fd2ASPNJP   | 17.8686247      | μ=20.780, σ=0.970  | 179
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | PBqnv2VM1kAW   | 12.5747446      | μ=16.291, σ=1.239  | 171


opponent_name	Tong_Hui_Kang_v4	defend_agent	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	2.3	7.4	6.7	0.0	16.1
defend_agent	97.7	0.0	30.9	71.4	75.4	92.3
lux_perspective	92.6	70.9	0.0	93.5	91.7	98.0
priority_search	93.3	28.6	6.5	0.0	28.1	64.5
simple_defend	100.0	24.6	8.3	75.0	0.0	88.9
tranfer_agent_v1	83.9	7.7	2.0	35.5	14.8	0.0


(no more regression with simple_agent.)





1633958661937_J6Dk3WdSMCMk, a0, defend_agent, 846813857
- [√] t54, cluster onwer drag back to fuel city! (a second case)


1633960566517_sVOBT9jpCU5V, 16, a0, defend_agent, 225838960
- [√] t22, u_1, goto can not build cluster cell (10, 15)
  * when assign cluster, use can_build open boundary
- [] t19, u_6, goto (8, 6) not (5, 5)
  * becuase (8, 6) has a larger fuel_wt
  * [?] Use a larger weight for neighbour city boost.

>> evaluating two changes above...
Total Matches: 625 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | A1qZAXfW6S4y   | 29.4803484      | μ=32.246, σ=0.922  | 244
/home/flynnwang/dev/playground/versions/defend_agent/main.py | 0exxN4fN2l5f   | 27.4118158      | μ=30.051, σ=0.880  | 236
/home/flynnwang/dev/playground/versions/simple_defend/main.py | avml3BuWaNsO   | 23.0910962      | μ=25.656, σ=0.855  | 203
/home/flynnwang/dev/playground/versions/priority_search/main.py | ffjImld6fc7v   | 21.4370228      | μ=24.000, σ=0.854  | 202
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | hZxnSsMRfstL   | 18.9339997      | μ=21.713, σ=0.926  | 189
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | JZzzFcozo3aw   | 13.0145822      | μ=16.198, σ=1.061  | 176

opponent_name	Tong_Hui_Kang_v4	defend_agent	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	4.5	2.9	9.7	3.2	22.9
defend_agent	95.5	0.0	32.7	80.0	88.1	93.2
lux_perspective	97.1	67.3	0.0	79.2	89.1	95.6
priority_search	90.3	20.0	20.8	0.0	25.6	62.1
simple_defend	96.8	11.9	10.9	74.4	0.0	82.9
tranfer_agent_v1	77.1	6.8	4.4	37.9	17.1	0.0

(got regression), drop cluster owner change and re-test.


Total Matches: 478 | Matches Queued: 10
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | aROE96mhWe0R   | 29.6282023      | μ=32.600, σ=0.991  | 183
/home/flynnwang/dev/playground/versions/defend_agent/main.py | voYCPok0YCXT   | 26.0519403      | μ=28.704, σ=0.884  | 190
/home/flynnwang/dev/playground/versions/simple_defend/main.py | 1Sn3ulxbap6Z   | 22.6873016      | μ=25.317, σ=0.877  | 162
/home/flynnwang/dev/playground/versions/priority_search/main.py | TJgWca1FNOeb   | 19.9760517      | μ=22.750, σ=0.925  | 143
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | eiTPWGSwyuhn   | 18.3778386      | μ=21.275, σ=0.966  | 130
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | T2WIXXo5lfzU   | 13.0401128      | μ=16.365, σ=1.108  | 148

(not very clear whether we should adopt it, abandon.)


======================================= 2021-10-10 ==============================================

# Perf opt

* Fast advance when both cell are plain cell and move at day.
* [√] collect_target_cells
* is_resource_tile_can_save_dying_worker


- [√] 980277360/a0/simple_defend: t19/u3 cluster and citytile back and forth
  * Fixed by lowering the city_crash_boost with worker_total_fuel(worker)


1633780525944_vVnbliZa03gd, 849304345, a1
- [√] Not delivering resource to city, but goes to next resource tile
     t111/u17, goto (1, 8), not (7, 1)
  * This is because `city_crash_boost` & `city_survive_boost` both not kick in
  * Moving on map waste much resource.
  * [√] change condition of no_resoruce_on_map => no_colletable_resource_on_map + no_resource_to_explore()
  * [x] not target res or nrt cell during plan=0: not_resource_target_worker
  * [√] limit max long wait time: 40
- [-] t27/u_9, goes into my unit to build city.
  u_6, target (0, 0) for one turn, make room for u_9 to kick in.
- [√] t280/u13 goto nrt (10, 8), not (9, 2)
- [√] t69/u6, die at near coal cell
  * This is bug for using wrong surviving_turns for estimate_cell_night_count
- [√] t268, everyone moving toward city c_14, but t268, when c14 survive this night, everyone move away.
  * worker target a crashing city c_21 (small one) and become a non resource target woker
  * after becoming non-resource target worker, city_survive_boost will kick in and target c14 (a large city)
    * because it's second round, the limit rule are by-passed.
  * once the city can last this round, the weight get lowered, and unit go to other targets.
  > Fix city weight
- [√] t230 u_17, blocked by cluster owner
  * Test remove cluster boosting when woker already arrived (only boost for non-arrival cluster)
- [√] t22/u2 why go to city tile (9, 1) not (10, 1)
  * A BUG: the first city is not added as wood city.
  * Woker goto fuel city because of city_survive_boost



# goto city items

- Fix idle worker
[√] use 0 weight for city tile
[√] set idle worker outside of assign_worker_target
[√] use smaller fuel threshold for worker_ready_to_return
[√] use no_resource_to_explore for city survive boost
    * use arrival fuel value
[√] inc weight for last city delivery: /10 => /2.5
[√] Fix initial city tile as wood city.
[√] fine ture this threshold based on different resource.


1633778149126_tz0O90vE2o57, 60039971, a0
- [√] why first step not going to the enemy direction?
  * t0 u1 goto (9, 1) not (10, 2)
  * because of limit enemy search distance.
  [] Later, if perf if OK, use larger distance.


1633775933684_6NyW5lZL7LqB, 216087638
- [√] 1st step is not reasonable
  * Reason: below is resource tile while above is near resource tile
  * [√] reverted the neighbour cell move_day+1 demote in get_cell_resource_values
  * [√] Use larger default weight for near resource cell (before resource tile is larger)
- [√] t4/u1, goto far away cell (8, 7), not (9, 4)
  * bug: because the distance is cut by threaten dist.
  * [√] Fixed by remove continue by threaten dist during nearest cluster searching.


>>> exp = run_2021_1010_17

Total Matches: 621 | Matches Queued: 11
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | 49h7UvxinhxW   | 30.5232140      | μ=33.387, σ=0.955  | 238
/home/flynnwang/dev/playground/versions/defend_agent/main.py | Uzk6JoDUxqwD   | 27.3845978      | μ=29.985, σ=0.867  | 243
/home/flynnwang/dev/playground/versions/priority_search/main.py | kQFfzmOSVpfC   | 24.2551136      | μ=26.827, σ=0.857  | 188
/home/flynnwang/dev/playground/versions/simple_defend/main.py | Lns3dQta69Ew   | 23.8822528      | μ=26.429, σ=0.849  | 218
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | hn7yhci4J67X   | 19.3626852      | μ=22.161, σ=0.933  | 189
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | C3Y3MK0yzuva   | 10.4532758      | μ=14.344, σ=1.297  | 166

opponent_name	Tong_Hui_Kang_v4	defend_agent	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	0.0	0.0	8.7	3.6	12.1
defend_agent	    100.0	0.0	    31.0	71.4	68.0	89.8
lux_perspective	    100.0	70.7	0.0	    83.0	91.2	100.0
priority_search	    91.3	28.6	17.0	0.0	44.4	71.0
simple_defend	    96.4	32.0	8.8	57.8	0.0	67.6
tranfer_agent_v1	87.9	10.2	0.0	29.0	32.4	0.0


======================================= 2021-10-09 ==============================================

> By +1 to cluster fuel factor

Total Matches: 113 | Matches Queued: 9
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/defend_agent/main.py | 8xwiVtRx0zpR   | 29.6532500      | μ=34.147, σ=1.498  | 48
/home/flynnwang/dev/playground/lux_perspective/main.py | 0jqpUL2SC1Ha   | 26.9919368      | μ=31.416, σ=1.475  | 46
/home/flynnwang/dev/playground/versions/simple_defend/main.py | QdSzd7ZMB90n   | 23.0951519      | μ=27.925, σ=1.610  | 30
/home/flynnwang/dev/playground/versions/priority_search/main.py | bWwwCFrkShSo   | 23.0815896      | μ=28.093, σ=1.671  | 31
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | mMpQYHTbMfDs   | 16.4584106      | μ=21.798, σ=1.780  | 36
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | 2hTYZdGaYarc   | 10.4885965      | μ=17.289, σ=2.267  | 35


opponent_name	Tong_Hui_Kang_v4	defend_agent	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
short_name
Tong_Hui_Kang_v4	0.0	0.0	0.0	0.0	25.0	22.2
defend_agent	100.0	0.0	81.2	71.4	62.5	100.0
lux_perspective	100.0	18.8	0.0	80.0	77.8	100.0
priority_search	100.0	42.9	20.0	0.0	16.7	80.0
simple_defend	75.0	37.5	22.2	83.3	0.0	33.3
tranfer_agent_v1	77.8	0.0	0.0	20.0	66.7	0.0


> By lower the weight for city_crash_boost (with worker_total_fuel(worker))

Total Matches: 418 | Matches Queued: 10
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | 1sWVMfLvJ7kv   | 32.9918066      | μ=35.978, σ=0.995  | 164
/home/flynnwang/dev/playground/versions/defend_agent/main.py | JjF3zBDBZWLn   | 28.2017787      | μ=30.947, σ=0.915  | 163
/home/flynnwang/dev/playground/versions/simple_defend/main.py | IcsDCzjufkL0   | 24.5794530      | μ=27.357, σ=0.926  | 142
/home/flynnwang/dev/playground/versions/priority_search/main.py | 8pBSX78Sg0yR   | 23.2427312      | μ=26.022, σ=0.926  | 133
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | 9VkuM8FgamIa   | 19.4746031      | μ=22.643, σ=1.056  | 123
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | 3J62tZPThC2U   | 13.5968098      | μ=17.263, σ=1.222  | 111

opponent_name	Tong_Hui_Kang_v4	defend_agent	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	4.3	0.0	12.5	8.7	13.0
defend_agent	95.7	0.0	29.8	73.3	75.0	93.8
**lux_perspective	100.0	70.2	0.0	90.9	92.1	96.6
priority_search	87.5	26.7	9.1	0.0	35.7	66.7
simple_defend	91.3	25.0	7.9	64.3	0.0	90.5
tranfer_agent_v1	87.0	6.2	3.4	33.3	9.5	0.0


>> After refactor.

Total Matches: 527 | Matches Queued: 9
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | T9Y9gdSTQ1PI   | 31.5110306      | μ=34.444, σ=0.978  | 220
/home/flynnwang/dev/playground/versions/defend_agent/main.py | OzGAtV1rc0pB   | 27.7055327      | μ=30.368, σ=0.887  | 195
/home/flynnwang/dev/playground/versions/simple_defend/main.py | YbRr7K378WPY   | 25.6158657      | μ=28.206, σ=0.863  | 186
/home/flynnwang/dev/playground/versions/priority_search/main.py | NeZGJen7tRsM   | 21.9600140      | μ=24.640, σ=0.893  | 173
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | 7ZDtDOhDD0HA   | 19.1055046      | μ=21.993, σ=0.963  | 145
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | yA8vPFoVeel2   | 13.8035885      | μ=17.480, σ=1.226  | 135

opponent_name	Tong_Hui_Kang_v4	defend_agent	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	0.0	0.0	16.7	4.3	25.0
defend_agent	100.0	0.0	21.4	75.0	73.5	85.3
**lux_perspective	100.0	78.6	0.0	95.7	76.4	100.0
priority_search	83.3	25.0	4.3	0.0	22.9	75.0
simple_defend	95.7	26.5	23.6	77.1	0.0	70.8
tranfer_agent_v1	75.0	14.7	0.0	25.0	29.2	0.0


======================================= 2021-10-08 ==============================================

1633558555962_Pf6x0bT6ZyCp, 980277360/a0/simple_defend
- [] t281, u3 not trying to save the large city, why?
- [√] t28, u_12, not moving or building ciytile
  * defending opponent, but not building citytile (as a cluster owner)
- [√] t18, u_9, not building citytile after transfer
  * [√] Make cluster owner build city when defending citytile
    Defend: because goto cluster will have more uncertainty, while protect resource at
    hand is more certain.
- [√] t48, u5, not defend nrt (10, 1)
  * This is because (10, 1) is not the nearest cluster to opponent unit.
  * [√] add min threat_turns for attacking opponent unit detection.
- [√] t179, u_38, why deliver to over fueled city (3, 22), not (5, 3)
     u9, is full, not going to city, but wait on (2, 23)
  * [√] two kind of city boost share one var, hard to turn off one of them only
  * city boost weight is small and won't call unit into it, that explain why it carsh quick
    > use small decay variable.
  * before it is (city_crash_boost / (arrival_turns / 5 + 1))


Total Matches: 849 | Matches Queued: 11
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/distri_agent_115/main.py | 5qXtFHmWGsGI   | 29.7990827      | μ=32.430, σ=0.877  | 247
/home/flynnwang/dev/playground/versions/distri_agent_110/main.py | jOGWhFuslVxS   | 28.0859775      | μ=30.638, σ=0.851  | 286
/home/flynnwang/dev/playground/versions/distri_agent_105/main.py | Wvn7ssCjWVry   | 27.7434104      | μ=30.235, σ=0.831  | 232
/home/flynnwang/dev/playground/versions/defend_agent/main.py | CsFMKRelZPSg   | 27.1562212      | μ=29.697, σ=0.847  | 211
/home/flynnwang/dev/playground/versions/simple_defend/main.py | jsQeYGaupPMi   | 22.9910060      | μ=25.638, σ=0.882  | 176
/home/flynnwang/dev/playground/versions/priority_search/main.py | Cxo7cKOmyKLY   | 21.5242236      | μ=24.173, σ=0.883  | 183
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | j8qokGzyKTAB   | 16.7457857      | μ=19.802, σ=1.019  | 191
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | FGxp9Zedxapy   | 12.3068626      | μ=15.920, σ=1.204  | 172


opponent_name	Tong_Hui_Kang_v4	defend_agent	distri_agent_105	distri_agent_110	distri_agent_115	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	5.3	0.0	5.6	0.0	4.8	0.0	30.0
defend_agent	94.7	0.0	48.4	28.8	23.3	88.2	90.0	93.1
distri_agent_105	100.0	51.6	0.0	41.1	48.8	70.4	72.7	90.6
distri_agent_110	94.4	73.1	60.7	0.0	37.8	89.7	86.2	97.3
distri_agent_115	100.0	76.7	51.2	62.2	0.0	79.3	88.6	100.0
priority_search	95.2	11.8	29.6	10.3	20.7	0.0	42.9	72.7
simple_defend	100.0	10.0	27.3	13.8	11.4	57.1	0.0	88.9
tranfer_agent_v1	70.0	6.9	9.4	2.7	0.0	27.3	11.1	0.0


>> city decay r=1.15

Total Matches: 402 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | x5GFtxqHEAf6   | 31.4002721      | μ=34.475, σ=1.025  | 149
/home/flynnwang/dev/playground/versions/defend_agent/main.py | YDp8J97UB4py   | 28.9221888      | μ=31.715, σ=0.931  | 157
/home/flynnwang/dev/playground/versions/simple_defend/main.py | klnqpnFOv0zV   | 23.6837102      | μ=26.460, σ=0.926  | 146
/home/flynnwang/dev/playground/versions/priority_search/main.py | 1zRuaR3lPKYI   | 22.5670564      | μ=25.434, σ=0.956  | 116
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | OFISCnib0LMJ   | 20.7000447      | μ=23.866, σ=1.055  | 120
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | PdW1zZXnHfRk   | 12.6988702      | μ=17.260, σ=1.521  | 116

opponent_name	Tong_Hui_Kang_v4	defend_agent	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	6.9	3.6	13.3	0.0	0.0
defend_agent	93.1	0.0	22.9	96.7	80.0	88.9
lux_perspective	96.4	77.1	0.0	78.9	90.6	96.9
priority_search	86.7	3.3	21.1	0.0	40.0	71.4
simple_defend	100.0	20.0	9.4	60.0	0.0	76.2
tranfer_agent_v1	100.0	11.1	3.1	28.6	23.8	0.0

>> city decay r=1.1

Total Matches: 1397 | Matches Queued: 9
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | OXdN5wm6x4Uk   | 30.5000018      | μ=33.177, σ=0.892  | 556
/home/flynnwang/dev/playground/versions/defend_agent/main.py | DJpZgEef3wPD   | 29.5399026      | μ=32.161, σ=0.874  | 529
/home/flynnwang/dev/playground/versions/simple_defend/main.py | ikuIruC3Join   | 24.8928530      | μ=27.412, σ=0.840  | 465
/home/flynnwang/dev/playground/versions/priority_search/main.py | TDVAiCUlZidD   | 23.3849694      | μ=25.895, σ=0.837  | 463
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | 5z47YcmVQeZb   | 20.3623350      | μ=23.002, σ=0.880  | 389
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | ff2u1m7qE0Ub   | 13.9907043      | μ=17.149, σ=1.053  | 392

opponent_name	Tong_Hui_Kang_v4	defend_agent	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	4.3	1.9	7.7	7.8	11.1
defend_agent	95.7	0.0	39.8	80.6	70.4	95.5
lux_perspective	98.1	61.0	0.0	85.9	88.2	93.2
priority_search	92.3	19.4	14.8	0.0	39.2	76.0
simple_defend	92.2	29.6	11.8	60.8	0.0	70.2
tranfer_agent_v1	88.9	4.5	6.8	24.0	29.8	0.0


======================================= 2021-10-07 ==============================================

1633499009523_fESkIaFimwLk, 33974899
- [√] t10, c_5, not building worker
  * Fix bug for the number of open boundary (and only use researched resource)
- [√] t122, u_76 stay at (15, 21) rather than going to (18, 27)
  * Because when number of worker is large, only not_leaving_citytile path is used.
- use MAX_SEARCH_DIST = 16 for opponent unit

Total Matches: 206 | Matches Queued: 12
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/defend_agent/main.py | GSAY2M0m4Mkm   | 28.3332906      | μ=31.634, σ=1.100  | 83
/home/flynnwang/dev/playground/lux_perspective/main.py | 4doVfWgxsgdH   | 28.2137564      | μ=31.754, σ=1.180  | 77
/home/flynnwang/dev/playground/versions/simple_defend/main.py | WXSVrC9On4hp   | 23.0391588      | μ=26.356, σ=1.106  | 70
/home/flynnwang/dev/playground/versions/priority_search/main.py | vcpeNKympOu6   | 22.0938106      | μ=25.379, σ=1.095  | 69
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | ZlDxUaaAPPam   | 15.2373527      | μ=19.787, σ=1.516  | 59
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | kMvMSkNZorff   | 14.5509974      | μ=18.793, σ=1.414  | 54

opponent_name	Tong_Hui_Kang_v4	defend_agent	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	9.1	9.1	33.3	9.1	33.3
defend_agent	90.9	0.0	55.6	70.8	81.2	100.0
lux_perspective	90.9	44.4	0.0	84.6	77.8	100.0
priority_search	66.7	29.2	15.4	0.0	37.5	85.7
simple_defend	90.9	18.8	22.2	62.5	0.0	77.8
tranfer_agent_v1	66.7	0.0	0.0	14.3	22.2	0.0



1633531183146_B2h8UluTU6KF, 434234212
- [√] t160, not many worker goes to uranium cluster on the top.
  * could be fixed by making default weight no use dist decay
- [√] t136, u_3@(9, 15) build city and blocked coal transfer.
  * It's blocked because due to city tile building on original resource tile.
- [√] u35 t106 not building city tile
  * remove is_coal_target on neighbour cell


1633499009523_fESkIaFimwLk, 33974899
- [√] open bounday cell, remove opponent unit standing positon

Total Matches: 1366 | Matches Queued: 10
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | yr93GaXyJUY4   | 28.8860633      | μ=31.554, σ=0.889  | 553
/home/flynnwang/dev/playground/versions/defend_agent/main.py | Si9yKAhqEyb6   | 27.6832170      | μ=30.219, σ=0.845  | 524
/home/flynnwang/dev/playground/versions/simple_defend/main.py | QDlPrsRUL6Nj   | 24.1583699      | μ=26.632, σ=0.825  | 481
/home/flynnwang/dev/playground/versions/priority_search/main.py | 92FnERkE9fRa   | 22.8797912      | μ=25.366, σ=0.829  | 424
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | wDGgdezBVrS1   | 18.2752725      | μ=20.954, σ=0.893  | 386
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | SNpmbQhbxASn   | 14.2163446      | μ=17.276, σ=1.020  | 364

opponent_name	Tong_Hui_Kang_v4	defend_agent	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	1.5	1.6	13.5	9.2	15.7
defend_agent	  98.5	0.0 	37.3	76.9	72.2	96.9
lux_perspective	98.4	62.7	0.0	  83.7	78.6	94.8
priority_search	86.5	23.1	16.3	0.0	21.7	75.9
simple_defend	90.8	27.8	21.4	78.3	0.0	76.7
tranfer_agent_v1	84.3	3.1	5.2	24.1	23.3	0.0




======================================= 2021-10-06 ==============================================

Map: 580916241 a0 v.s. trans agent
- [√] resource stavation due to city building at all boundary of uranium
- [-] t10, u_3, make cluster owner assignment more stable
  * should be fixed by

525444706, 1633395602596_2pzohdrFWoxx
- [√] t9, not building city tile at turn 10, bug?
  * **This is a bug: not build citytile for cluster owner when getting tranfer

114145806, a0
- [x] t12, cluster owner not building citytile to defend opponent unit.
  * add defend behaviour seems quite anooy for the result.
- [-] t55 u19, u22, failed to defend
  * when estimate min turns to cluster for unit, add its cooldown. (already used)
- [√] t9, u3, u1, switch cluster, why?
  * [-] opponent weight should use weight discount.
  * [√] cluster assignment should ignore opponent unit for computing weight
    > already ignore opponent unit for clustering. but not weight
    > ** adding boundary positons for cluster when computing weight.
- [-] t8/u1, should goto opponent cluster instead of defend
  * minor, not fixing for now.
- [√] same weight next move, adding collison weight with enemy
  * but may die because of depend opponent weight

Total Matches: 597 | Matches Queued: 11
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/defend_agent/main.py | WKNgqU80vwBH   | 30.8430642      | μ=33.460, σ=0.872  | 224
/home/flynnwang/dev/playground/lux_perspective/main.py | 2H7hwAHCFhB5   | 28.4638078      | μ=31.023, σ=0.853  | 232
/home/flynnwang/dev/playground/versions/simple_defend/main.py | LJvAZmrvv3IZ   | 26.3099984      | μ=28.803, σ=0.831  | 195
/home/flynnwang/dev/playground/versions/priority_search/main.py | aC4d8roPjidL   | 23.4450924      | μ=26.034, σ=0.863  | 192
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | SGVEn4Nl6tkZ   | 22.1312595      | μ=24.777, σ=0.882  | 186
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | G6fmICKbI6rZ   | 13.7869175      | μ=17.629, σ=1.281  | 165

opponent_name	Tong_Hui_Kang_v4	defend_agent	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	5.6	0.0	3.1	4.8	15.2
defend_agent	  94.4	0.0   58.5  	87.0	82.6	88.6
lux_perspective	100.0	41.5	0.0   	80.5	64.7	79.5
priority_search	96.9	13.0	19.5	0.0	35.7	71.9
simple_defend	95.2	17.4	35.3	66.7	0.0	71.4
tranfer_agent_v1	84.8	11.4	20.5	31.2	28.6	0.0



833391315, a0
* [√] should I build city with cluster owner when it's full?
  * by removing the demote weight for target cell.


1633483069584_LbTsgSixGPvv, 752431777/a0 v.s. transfer
- [√] t10: Why u_3 target (11, 8)
  * cause: opponent weight larger than fuel wt
- [√] t42/u17, not defend into (5, 7)
  * Because n9 neighbour clustirng is too large, and will make us think enemy
    already visited the cluster
  * Reverted using n4 cluster (be more careful about change. test often.)
  * Use threshold for `count_cluster_contains_player_citytile`
- [√] t38, u1 move onto wood (6, 5)
  * Fixed by using intersection of unit nearest cluster ids and cell cluster ids
    to compute the opponent_weight

Total Matches: 595 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/defend_agent/main.py | kvNhkrtFCnUA   | 27.6745431      | μ=30.213, σ=0.846  | 251
/home/flynnwang/dev/playground/lux_perspective/main.py | 6zO3vBEHXtqG   | 26.9649411      | μ=29.512, σ=0.849  | 224
/home/flynnwang/dev/playground/versions/simple_defend/main.py | K9x6yYfcKDRw   | 23.9335784      | μ=26.412, σ=0.826  | 219
/home/flynnwang/dev/playground/versions/priority_search/main.py | Iai61W2rcsN5   | 22.7327545      | μ=25.292, σ=0.853  | 163
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | tstbOi0pGQdc   | 19.9024660      | μ=22.572, σ=0.890  | 178
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | flVB1gNzzC9b   | 12.6104037      | μ=16.087, σ=1.159  | 155

(run_2021_1006_14)
opponent_name	Tong_Hui_Kang_v4	defend_agent	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	2.7	2.6	8.3	11.5	6.9
defend_agent	97.3	0.0	53.3	83.6	68.4	88.4
lux_perspective	97.4	46.7	0.0	71.4	57.6	97.6
priority_search	91.7	16.4	32.1	0.0	37.1	69.6
simple_defend	88.5	31.6	42.4	62.9	0.0	72.1
tranfer_agent_v1	93.1	11.6	4.9	30.4	27.9	0.0


1633502509534_6pIepjy8rPeX, 749133666, a1
- Resource competetion failure.
- [√] born worker to the citytile near more citytile building position
  * Add weight for open positions.
- [√] t41, why u6, u8 decide to switch cluster
  * Use small penality for cluster, worker weight assignment.
- [√] can build wood citytile if there're >= two wood cell around, see a0 T30
- t261: multiple workers go into: (23, 8)

Total Matches: 253 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | dcuTrCSPV6yW   | 27.2490196      | μ=30.250, σ=1.000  | 103
/home/flynnwang/dev/playground/versions/defend_agent/main.py | TP9CnG1ztDkw   | 26.4356878      | μ=29.429, σ=0.998  | 93
/home/flynnwang/dev/playground/versions/simple_defend/main.py | A16bh7mYN2gW   | 23.5882806      | μ=26.416, σ=0.943  | 99
/home/flynnwang/dev/playground/versions/priority_search/main.py | rmi2EdhI99bu   | 19.9787932      | μ=23.314, σ=1.112  | 68
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | dXIwD0aHv11J   | 18.0551506      | μ=21.377, σ=1.107  | 79
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | DGFl0mq14FM6   | 12.4694927      | μ=16.916, σ=1.482  | 64

(run_2021_1006_20)
opponent_name	Tong_Hui_Kang_v4	defend_agent	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	5.9	0.0	27.3	12.5	7.7
defend_agent	94.1	0.0	36.7	66.7	80.0	92.9
lux_perspective	100.0	63.3	0.0	90.0	58.6	100.0
priority_search	72.7	33.3	10.0	0.0	22.7	76.9
simple_defend	87.5	20.0	41.4	77.3	0.0	70.0
tranfer_agent_v1	92.3	7.1	0.0	30.8	30.0	0.0



======================================= 2021-10-05 ==============================================

map: 281801529 a1
- [√] t9, u2 not going to (9, 8)
  * This is a bug for not add nb_fuel_wt for return from get_one_step_collection_values
- [√] not blocking enemy from coming into my cluster, why?
  * Assume enemy will goto the nearest cluster researched with its own citytile


Map Seed: 890013982, a0
- [√] u_1 going in a circle to build first citytile.
  * inc dd from 1.4 to 1.8, and add 1 move_days to nb fuel wt.

Total Matches: 1725 | Matches Queued: 11
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/defend_agent/main.py | wYWhGKbi2Lhb   | 29.6605404      | μ=32.203, σ=0.847  | 635
/home/flynnwang/dev/playground/lux_perspective/main.py | 44R2423vIaLt   | 27.9058378      | μ=30.417, σ=0.837  | 708
/home/flynnwang/dev/playground/versions/simple_defend/main.py | vFDIRk6HqHZ5   | 26.7098085      | μ=29.150, σ=0.814  | 621
/home/flynnwang/dev/playground/versions/priority_search/main.py | 9WvkpHkbcmJJ   | 23.8068875      | μ=26.254, σ=0.816  | 537
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | ApbpdZTngkRF   | 20.4596386      | μ=23.032, σ=0.858  | 490
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | v9KqZVxng4Qw   | 16.1128917      | μ=19.037, σ=0.975  | 459

======================================= 2021-10-04 ==============================================

207136199@a1
- [√] t21/u5: u5 not moving away from after receiving transfer
  missing transfer build weight for near resource tile.
- [-] t141: u_3 not transfer resource to u_1 on the citytile.
  because u_1 is not a idle worker
- [√] t133: u_7 not doing transfer, and try build city tile but move onto city tile.
  * worker should not force into position, due to v=0 when computing next move.
  * Fixed by using negative weight for non-intentional next move.
  * Or could be fixed by removed force into citytile case only
- [√] $B u_51 repeated try to transfer resource to city tile.
  * a bug of `nights_to_last_turns` not count nights
- [√] t131: worker move away after building city. why?
  * main reason: not saving size=1 citytile
  * direct reason: other city is last nights to track the unit.
  * Fixed after giving same amout of non-last city crash boost for non-wood made city.



- [√] t162, u_16 not using transfer resource deposit to (10, 1)
  * it's because u-16 is go to some uranium resource cell
  * Resource collection and leak resource to citytile.
  * When is resource target OK for resource losing? (try coal or uranium path)
  * Solved by using not_leaving_citytile path for unit with coal or uranium

- [√] t125/u_40: not moving forward.
- [√] u16, u23, not moving to optimal position for resource collection.
  * Solved by using 1.4 ** dist as dist decay weight.

- [√] t62, crash due to no cityile neighbour transfer build (after weight decay change)
  * Solved by checking move and build for neighbor transfer unit

- [√] t208/u_49: Why there is mult target drawing?
  * Only dry for the first plan.

- [√] t225: can't move into city tile (5, 8) because of 8 is full.
  * Possible fixed by checking the boosting rule with unit on cell.

(build city tile at wrong locations)
* [√] t27, u7, build city tile in the midlle of ground
  * fixed: woker is build city task and at build position
* [√] t17/u5, not build city after transfer into (7, 0), but why build on t21
  * t17 not build: not using transfer_build_wt as test conditon (after change to use is_worker_building_citytile)

* [√] t180, u37, not stick onto (1, 4) for resource tranfer
  * Fix is_first_citytile by deepcopy both first and other cells.

- [√] t228, u_10, move_fuel=0?
  * missing unit_fuel > 0 for city_crash_boost-3, boosted by no_resoruce_on_map
- [] t153, u_7 die at night, should switch with others.
  * fix it later
* [] t162, seems limit resource deposit is not working.
  * This is because when you ignore one edge, a new edge might still deliver more than needed resource.
  * [√] Use keep resource connection + city_game_end_fuel_req for plan_idx=1
  * [] t174, u35, u17, why u17 follows u35 goto (1, 4)
  * [√] t92, all unit with coal went into (1, 7)
    > This is because there is no limit on how many worker to use to save for current night.
    > [√] Support limit and transfer for worker save city for this night.
  * [√] t87, all workers goto (1, 4)
    > becuase two city_crash_boost rule has overlap.
    > also limit non-last city for the second rules.
    > [√] Could we just move the elimenation rule out of current rule?


* MIN_DEFEND_ENEMY_ARRIVAL_TRUNS = 6
* use open 2 for b>3 and open 1 for b<=3

opponent_name	Tong_Hui_Kang_v4	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	3.8	8.9	6.5	16.9
lux_perspective	97.4	0.0	65.5	72.5	86.3
priority_search	91.1	35.6	0.0	36.7	74.6
simple_defend	93.5	27.5	64.4	0.0	82.7
tranfer_agent_v1	84.6	13.7	27.0	18.7	0.0



56c0a70b0f4c00827a00dcaac644955779865ac
* KEEP_RESOURCE_OPEN=1

opponent_name	Tong_Hui_Kang_v4	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	5.0	9.4	8.5	13.9
lux_perspective	96.7	0.0	78.8	65.5	96.7
priority_search	90.6	21.2	0.0	38.8	74.5
simple_defend	91.5	34.5	61.2	0.0	76.1
tranfer_agent_v1	86.1	3.3	25.5	23.9	0.0


bf7b3356c4abbd9cc4d5a3731073c26f37eb99a0
* add liimt city fuel task cocurrent units based on resource delivered

opponent_name	Tong_Hui_Kang_v4	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	0.0	7.3	3.1	12.5
lux_perspective	100.0	0.0	77.0	77.9	87.9
priority_search	92.7	23.0	0.0	40.3	70.6
simple_defend	96.9	23.4	59.7	0.0	86.6
tranfer_agent_v1	87.5	12.1	29.4	13.4	0.0

======================================= 2021-10-02 ==============================================

git@786227919ae7c6598d72a9adffbcc67851567b24
* try add resource distribution

Total Matches: 2617 | Matches Queued: 9
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/versions/simple_defend/main.py | YgPng6PGu5dd   | 25.9639346      | μ=28.421, σ=0.819  | 1135
/home/flynnwang/dev/playground/versions/priority_search/main.py | nkAoBMACEYRr   | 24.8751408      | μ=27.286, σ=0.804  | 1210
/home/flynnwang/dev/playground/lux_perspective/main.py | EDFsfBkTFUvg   | 22.2943904      | μ=24.643, σ=0.783  | 1045
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | 8NHCgMcchYHr   | 21.7176567      | μ=24.143, σ=0.808  | 975
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | mhJUcsOVjE8Y   | 17.3786813      | μ=19.936, σ=0.853  | 869



======================================= 2021-10-01 ==============================================

- lower the weight for resource opponent_weight to 100
- [√] better degradation: to keep as much as path without cc as possible; map size;
  * test before sim during quickest path search.

Total Matches: 965 | Matches Queued: 11
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | TCepg3MqESRg   | 31.0931944      | μ=33.725, σ=0.877  | 417
/home/flynnwang/dev/playground/versions/simple_defend/main.py | fUEPUW0qw1wU   | 28.6360688      | μ=31.112, σ=0.825  | 436
/home/flynnwang/dev/playground/versions/priority_search/main.py | JcYU4N92un0e   | 26.0095676      | μ=28.443, σ=0.811  | 408
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | WP14s8TvoBIP   | 24.2830651      | μ=26.808, σ=0.842  | 355
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | 6sHeBQ2S0cSS   | 17.4098439      | μ=20.334, σ=0.975  | 314

Tong_Hui_Kang_v4	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	2.4	17.1	16.7	10.8
lux_perspective	97.6	0.0	82.8	73.0	95.1
priority_search	82.9	17.2	0.0	36.1	69.7
simple_defend	83.3	27.0	65.6	0.0	71.2
tranfer_agent_v1	89.2	4.9	30.3	28.8	0.0



======================================= 2021-09-30 ==============================================


1632851793695_H5t6ytzg3d1b/s=724271278
* [√]1st step is not good. should use geometry dist instead of manhatten dist
  > Use shortest_path for enemy dist estimation.

- [√] Use shortest path for enemy threat estimation: limit max distance to 5.

Total Matches: 595 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | LsgjEGM2VPw6   | 28.3515887      | μ=30.973, σ=0.874  | 253
/home/flynnwang/dev/playground/versions/simple_defend/main.py | zWp2YOVao21C   | 27.2141759      | μ=29.733, σ=0.840  | 272
/home/flynnwang/dev/playground/versions/priority_search/main.py | o7QfPxu7wNtR   | 24.5052853      | μ=26.941, σ=0.812  | 266
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | a8eE48WYEuZC   | 21.1710017      | μ=23.753, σ=0.861  | 206
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | HCVLxH37TlVV   | 15.3688777      | μ=18.423, σ=1.018  | 193

opponent_name	Tong_Hui_Kang_v4	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	6.2	13.3	5.0	12.5
lux_perspective	93.8	0.0	75.6	57.1	96.3
priority_search	86.7	24.4	0.0	38.8	72.7
simple_defend	95.0	42.9	62.4	0.0	77.6
tranfer_agent_v1	87.5	3.7	27.3	22.4	0.0


- [√] 627256722: agent not building city at initial rounds.
- [√] 222071549: similiar issue
  * Merge small cluster with n9 search

Total Matches: 436 | Matches Queued: 6
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | NIgBvwEIdtnv   | 30.8770502      | μ=33.678, σ=0.934  | 204
/home/flynnwang/dev/playground/versions/simple_defend/main.py | 5oJa5X29PMNP   | 27.2281869      | μ=29.792, σ=0.855  | 201
/home/flynnwang/dev/playground/versions/priority_search/main.py | yubYvoCHyF1V   | 24.3441973      | μ=26.932, σ=0.863  | 182
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | qXJyFHKEv3ns   | 21.1249851      | μ=23.935, σ=0.937  | 151
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | OLZushZMy4sn   | 15.5163013      | μ=19.202, σ=1.228  | 134

opponent_name	Tong_Hui_Kang_v4	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	6.8	10.3	0.0	16.7
lux_perspective	93.2	0.0	83.1	71.7	100.0
priority_search	89.7	16.9	0.0	31.0	69.2
simple_defend	100.0	28.3	69.0	0.0	76.6
tranfer_agent_v1	83.3	0.0	30.8	23.4	0.0


================================= 2021-09-29 ==============================================


- 863040340/t98: enemy go into my coal cluster.
  * [√] Secure the resource if opponent units is around with large weight (do not leave)
  * [√] If cell in danger, do not move away to save city tile (defend city > save city)
    (just use a large weight to do defend)
  * [√] Should I ignore unit for resource weight cell value computation? YES, to stitch unit
  (would be better to use cart for resuce city.)
- 863040340/t30/u_3: going out of city and die.
  * [√] Should check fuel_wt before making enemy boost
- 863040340/t12/u_5: why goto (3, 4) instead of (1, 4)?
  * [-] Becauce (3, 4) has a citytile neighbour (cooldown=0)
  * [√] why the opponent weight of (3, 4) is not larger: bug of |unit_arrival_turns|


- 24989078@a0:
  * [√] |nights_to_last_turns| Recursion unlimited: fixed by check turn < 360
  * [√] Resource larger than capacity during quick path search: cache problem

- [√] 467381596@a1/u2: move onto citytile when try build new one.

- [√] 442988189@a0 vs simple: do not boosting opponent for unit in one cluster
  (Should escape cells which is not the nearest cluster cell to opponent unit)
- [√] Should also clear tasks for the second round of assignment.
- [√] 846993828@a1 v.s. tranfer_agent: boosting far away clsuter, why?
  (only boost opponent unit's nearest cell of nearest cluster's )
- [√] 846993828:t39: u16 transfer to u13
  (do not transfer if nb unit can collect and build)


Total Matches: 647 | Matches Queued: 5
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | 1KDk7uzCbkrW   | 28.9813750      | μ=31.712, σ=0.910  | 285
/home/flynnwang/dev/playground/versions/priority_search/main.py | 2sSBYCbFTPl5   | 24.4306553      | μ=26.932, σ=0.834  | 293
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | 3LYzmY6jb3Wm   | 21.3886320      | μ=23.905, σ=0.839  | 262
/home/flynnwang/dev/playground/versions/explore_cluster/main.py | etdbTegMJwMB   | 19.7444759      | μ=22.280, σ=0.845  | 236
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | WSSLDnVqF1L0   | 15.4819406      | μ=18.256, σ=0.925  | 218

opponent_name	Tong_Hui_Kang_v4	explore_cluster	lux_perspective	priority_search	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	20.4	4.8	11.1	22.7
explore_cluster	79.6	0.0	3.7	21.9	28.3
*lux_perspective	95.2	96.3	0.0	75.0	88.2
priority_search	88.9	78.1	25.0	0.0	72.6
tranfer_agent_v1	77.3	71.7	11.8	27.4	0.0


Total Matches: 680 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | mZUa7uKASQBN   | 27.8964206      | μ=30.439, σ=0.847  | 311
/home/flynnwang/dev/playground/versions/simple_defend/main.py | pNLJsGbsgBGJ   | 25.8077776      | μ=28.297, σ=0.830  | 287
/home/flynnwang/dev/playground/versions/priority_search/main.py | ZKnTHz9m05gy   | 24.4658152      | μ=26.914, σ=0.816  | 301
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | 6oy3d5rEcDki   | 21.0924362      | μ=23.612, σ=0.840  | 244
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | ocTULjPcaFoo   | 13.7129074      | μ=16.951, σ=1.079  | 217


opponent_name	Tong_Hui_Kang_v4	lux_perspective	priority_search	simple_defend	tranfer_agent_v1
Tong_Hui_Kang_v4	    0.0	    3.3	    6.5	    0.0	    16.7
lux_perspective	        96.7	0.0	    65.2	65.9	83.1
priority_search	        93.5	34.8	0.0	    43.4	68.2
simple_defend	        100.0	34.1	56.6	0.0	    83.6
tranfer_agent_v1	    83.3	16.9	31.8	16.4	0.0



* Evaluation results: to use city path when agent amt > 0 (not good)

Total Matches: 402 | Matches Queued: 5
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | RTwzcDvDgXhV   | 28.9226418      | μ=31.620, σ=0.899  | 177
/home/flynnwang/dev/playground/versions/priority_search/main.py | 8uJyHyBaEERU   | 26.6133514      | μ=29.240, σ=0.875  | 180
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | jeoZaVhkxxvj   | 24.1695417      | μ=26.779, σ=0.870  | 157
/home/flynnwang/dev/playground/versions/explore_cluster/main.py | 22bni9dBjfiH   | 19.2654716      | μ=22.132, σ=0.955  | 146
/home/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | MLgxGdzl8IKO   | 16.9499346      | μ=19.954, σ=1.001  | 144

opponent_name	Tong_Hui_Kang_v4	explore_cluster	lux_perspective	priority_search	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	38.7	9.1	6.4	11.1
explore_cluster	61.3	0.0	8.7	6.2	23.3
*lux_perspective	90.9	91.3	0.0	63.0	76.6
priority_search	93.6	96.9	37.0	0.0	69.4
tranfer_agent_v1	88.9	76.7	23.4	30.6	0.0


======================== 2021-09-27 =============================

- [√] 376379665: t117/u19, worker die out side city
  * Fixed: not change the params duplicate_positions function

- 906223639/1632651940339_uU5rIqfsgA0h
* [√] Make use of idle worker! (send idle worker again)
* [√] Worker not moving to the cloest point to target within city at night
  (how to handle surviving_turns and wait_turns: use surviving_turns at search state.)
* [√] t63/u_14, not moving onto coal resource tile
  (fix wait condition: move_days + surviving_turns < wait_turns)

* [-] t23/u_2: move back to original cluster.
  (go back because of city crash boost, no cluster because of opponent unit occupy.)
* [-] Use multiple dest tile for cluster boosting (already?)

Total Matches: 259 | Matches Queued: 6
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/home/flynnwang/dev/playground/lux_perspective/main.py | BTlhwLz4dYgW   | 24.7549387      | μ=27.226, σ=0.824  | 259
/home/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | FahgWlwlaVRR   | 20.3019452      | μ=22.774, σ=0.824  | 259

  win_loss	loss	win	win_pct
short_name	map_size
lux_perspective	12	11	47	81.0
16	19	47	71.2
24	12	54	81.8
32	13	54	80.6



==================== 2021-09-26 (2) =========================


- [√] Optimize runtime.
  * remove look ahead during move.
  * [√] Limit worker 71
  * [√] cache fuel in SearchState
  * [√] cache √ utility.is_day / √ is_night / √ cargo_total_fuel
      / √ get_unit_action_cooldown /
      / cell_has_target_player_citytile / [removed] get_unit_upkeep_by_type
  * [] Optimize sim_on_cell
- [√] Fix bug on consume_cargo_resource


Total Matches: 255 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | umiACyYx7wtf   | 25.8101985      | μ=28.416, σ=0.869  | 255
/Users/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | iCg8YnAxSwm2   | 18.9773384      | μ=21.584, σ=0.869  | 255


win_loss	win	loss
lux_perspective	    227	48
tranfer_agent_v1	48	227

	win_loss	loss	win	win_pct
short_name	map_size
lux_perspective
12	15	56	78.9
16	15	55	78.6
24	8	59	88.1
32	10	57	85.1



==================== 2021-09-26 =========================


- [√] remove limit (or limit at 120)
- [√] 860693002@t10: try build citytile next to each other.

(explore cluster optimization)
- [√] 242859934: also visit enemy's cluster for city tile building
- [√] 242859934: why the cluster explorer coming back and forworth?
      (cause resource weight is larger, use unit cargo as hint)

- [-] cluster boost with weight decay (so that it will persist)
  * This is already the case.
- [√ ]969408840@0t32u3: Do not move to coal too early
  * limit on wait_turns <= 6
  * count as arrival for near_resource_tile
  * t39: worker dying => fix sim_on_cell sim turn ref.
- [√] 969408840: do not use cluster boost worker to resurce cityhouse when it's wood full

- [√] 699414615/a1/t1: Bias cells towards enemy locations
  - [√] 699414615@t70u27: not moving back city (bug of bias towards enemy)

- [√] 699414615/a1/t39/u1: Agent move out of woods too soon to build city tile, waste one turn.
  * do not move at last night.

- [X] 796001604@t28: move out of dying citytile (not possible, no resoruce tile or other city.)


- [√] 762995151@t3: resource tile and near, max amount at 40, more won't help.

- [√] 709680438: all workers dies on days 1
  * Do not boost city build for cluster owner near non-target cluster with player city tiles
- [-] 709680438: t10/u_3, target far away cluster tile position
  * because the other two tiles are blocked by city tile or opponent unit.
- [√] u_3/t8: not boost to near enemy position.
  * Increase defend weight
  * Use manhatten distance.

Total Matches: 486 | Matches Queued: 10
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | FIX2U80TMqO8   | 28.5648778      | μ=31.233, σ=0.890  | 214
/Users/flynnwang/dev/playground/versions/priority_search/main.py | c7SAYR8ya57R   | 25.9923043      | μ=28.533, σ=0.847  | 203
/Users/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | FBCo7ik7x56K   | 23.0569513      | μ=25.584, σ=0.842  | 208
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | 5zI2xK3KYqKN   | 19.3174706      | μ=21.965, σ=0.883  | 170
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | hOUiTnS0glmo   | 16.4214701      | μ=19.255, σ=0.944  | 177

opponent_name	Tong_Hui_Kang_v4	explore_cluster	lux_perspective	priority_search	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	27.8	8.7	17.1	9.8
explore_cluster	72.2	0.0	12.7	15.6	28.6
lux_perspective	91.3	89.1	0.0	67.2	85.4
priority_search	82.9	84.4	32.8	0.0	70.4
tranfer_agent_v1	90.2	71.4	16.7	29.6	0.0



==================== 2021-09-24 =========================

new baseline for [priority_search] agent

Total Matches: 709 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/priority_search/main.py | S4hr8d5Kg1IW   | 27.6315926      | μ=30.126, σ=0.831  | 337
/Users/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | 55A7FW7uIJza   | 24.8101631      | μ=27.233, σ=0.808  | 322
/Users/flynnwang/dev/playground/versions/sazuma_1430/main.py | TdDq6nJ54vGP   | 22.1792386      | μ=24.615, σ=0.812  | 234
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | aYL8jKZVkURa   | 21.8331642      | μ=24.255, σ=0.807  | 289
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang_v4/main.py | 9sESKOT99gZY   | 19.5155309      | μ=22.029, σ=0.838  | 236


opponent_name	Tong_Hui_Kang_v4	explore_cluster	priority_search	sazuma_1430	tranfer_agent_v1
Tong_Hui_Kang_v4	0.0	24.5	15.4	35.0	20.0
explore_cluster   	75.5	0.0	24.7	61.1	19.5
priority_search	    84.6	75.3	0.0	    79.3	67.4
sazuma_1430	        67.5	38.9	20.7	0.0	   25.8
tranfer_agent_v1	80.0	80.5	32.6	74.2	0.0





==================== 2021-09-22


@141895229 explore_cluster
* Moving output of dying city
- Support resource collection on duing quickest path search
- more accuate resoruce collection on cell (not possible, because of its future and there is other agent)
- Add citytile burn down during quickent path search.

* worker went to not researched near resource tile.
  TODO
* [done] why resource is first fill into small city?
  - use small weight decay for city tile saving mission
* [done] goto resource tile at night pass city and die (turn 38, u_13)
  - fix city_fuel at turn

@885572143 explore_cluster
* add more worker to citytile count: use 8
* [not done] move to uranium ASAP. (maybe after coal finished?)

Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | Wn2kfvy0ASbk   | 27.9354594      | μ=30.526, σ=0.863  | 312
/Users/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | tLdgNlZc05Sz   | 26.8007169      | μ=29.324, σ=0.841  | 304
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | xKOJMIlDrJOX   | 24.2862879      | μ=26.779, σ=0.831  | 285
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | DPiD7Fq6xXMk   | 19.2482321      | μ=21.886, σ=0.879  | 266
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | WhpoYcrQ43zB   | 17.4061673      | μ=20.180, σ=0.925  | 239

opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective	tranfer_agent_v1
Tong_Hui_Kang	0.000	45.283	7.937	7.812	5.085
boost_near_resource	54.717	0.000	19.355	8.451	15.000
explore_cluster	92.063	80.645	0.000	19.767	32.432
lux_perspective	92.188	91.549	82.558	0.000	59.341
tranfer_agent_v1	94.915	85.000	68.919	40.659	0.000


@172635463 tranfer_agent_v1: explore late
@250467351 tranfer_agent_v1: rescue city failed
@876456571 tranfer_agent_v1: invaded by the other agent.


- [Fix] do not move onto tranfer unit.
- [Fix] sort transfer build positions based on resource
- [TODO]: moving worker out of dying city.
- 173181129@explore_agent turn=69, going far into coal? (use unit surviving_turns)
- remove double calls
- [fix] positve weight for city that last at night (round factor fix)
- ?why u_20 move to near source tile @173181129: because the other worker in cooldown_wait_days
- [TODO]drop opponent citytile count when compute cluster assignment
- u_8 no weight on turn 20 (becuase of transfer action)
- [fix] send wood worker back to citytile when full


Total Matches: 560 | Matches Queued: 11
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | zCkP8n1nqX7c   | 28.8291580      | μ=31.514, σ=0.895  | 233
/Users/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | 5qDR0xSFR2u4   | 25.6965306      | μ=28.232, σ=0.845  | 265
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | nKsP3KbZjH8p   | 22.4311385      | μ=24.903, σ=0.824  | 226
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | 5CJzancfDJbx   | 20.1933694      | μ=22.777, σ=0.861  | 213
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | lSm3IZnENou5   | 15.9296517      | μ=18.964, σ=1.011  | 183

opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective	tranfer_agent_v1
Tong_Hui_Kang	0.000	13.333	15.625	2.083	12.281
boost_near_resource	86.667	0.000	26.230	13.208	19.231
explore_cluster	84.375	73.770	0.000	22.222	25.641
lux_perspective	97.917	86.792	77.778	0.000	73.684
tranfer_agent_v1	87.719	80.769	74.359	26.316	0.000


@195635200 explore_agent: initial explore?
- Limit the distance to build city time <= 3


Total Matches: 292 | Matches Queued: 9
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | B1OrkEvJvlCa   | 30.7788747      | μ=33.971, σ=1.064  | 135
/Users/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | n41aWmmPOFdT   | 25.5638641      | μ=28.464, σ=0.967  | 122
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | mDHA3uafDFIS   | 21.3554740      | μ=24.164, σ=0.936  | 119
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | U3KGF40wlyjt   | 19.9142002      | μ=22.868, σ=0.985  | 108
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | IZSzKxyUHN9Q   | 14.3613748      | μ=18.132, σ=1.257  | 100j


opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective	tranfer_agent_v1
Tong_Hui_Kang	0.000	23.529	17.391	2.857	0.000
boost_near_resource	76.471	0.000	44.828	8.696	12.821
explore_cluster	82.609	58.621	0.000	11.628	33.333
lux_perspective	97.143	91.304	88.372	0.000	82.353
tranfer_agent_v1	100.000	87.179	66.667	17.647	0.000


- Test remove wood worker full boosting rule.

Total Matches: 191 | Matches Queued: 10
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | Sktv95NG2VPW   | 27.9133737      | μ=31.312, σ=1.133  | 77
/Users/flynnwang/dev/playground/lux_perspective/main.py | hZhFlRvuYip2   | 26.7752157      | μ=30.109, σ=1.111  | 73
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | kytd9B7hmTsh   | 23.4439667      | μ=26.489, σ=1.015  | 89
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | 8K5iqRQgZoaj   | 19.5275129      | μ=22.903, σ=1.125  | 76
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | jwY5pFTEquUC   | 17.8681639      | μ=21.483, σ=1.205  | 67



=============== 2021-09-21


@254213878
* How to keep citytile alive?
- collect as much as possible before moving back citytile with minimum deliveray.
- Do not use uranium for city building (except if no city left)
- Add multiple targets for coal and uranium target.
- Fix one step collect rate for city cell weight of dying worker.

Total Matches: 932 | Matches Queued: 9
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | xSmq9wwIJbxW   | 28.2573994      | μ=30.902, σ=0.881  | 445
/Users/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | VpjMGvpKRSWM   | 26.7640726      | μ=29.293, σ=0.843  | 391
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | jhmVKpEJI458   | 22.6833760      | μ=25.170, σ=0.829  | 395
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | kpHU6c1LR4Vi   | 18.7487519      | μ=21.338, σ=0.863  | 334
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | TnSRS1R2sn49   | 17.5817110      | μ=20.282, σ=0.900  | 299


opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective	tranfer_agent_v1
Tong_Hui_Kang	0.000	32.203	19.737	8.333	3.896
boost_near_resource	69.492	0.000	27.848	10.476	13.131
explore_cluster	82.895	72.152	0.000	18.248	29.091
lux_perspective	91.667	89.524	81.752	0.000	64.545
tranfer_agent_v1	96.104	86.869	70.909	35.455	0.000



================== 2021-09-19

>> DONE
* bug: 392744278, not building new citytile at beginning
* Try use large negative values for task assignment.
* Move to nearest non-saving city tile
* 559804163: go to remote cluster blocked by citytile
  Solution: use priority search based on turn & resource & cooldown

Total Matches: 207 | Matches Queued: 9
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | 3crvlZRyRYc7   | 27.6776525      | μ=30.691, σ=1.004  | 97
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | I6wBPwqxj8kx   | 23.8109692      | μ=26.767, σ=0.985  | 82
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | g41HVbkZB6nm   | 22.5754104      | μ=25.538, σ=0.988  | 80
/Users/flynnwang/dev/playground/lux_perspective/main.py | kQ4cCdhLyk8h   | 21.0058017      | μ=23.998, σ=0.998  | 84
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | oHttUsiLRB3C   | 17.1875221      | μ=20.730, σ=1.181  | 71


* Do not make unit with cd > 1 as target cell.
* multiple next steps on quick_path
* Do not do cluster boost for player cluster.
* Fix multi path points from quick path (dulicated source)
* bug: Cluster boost will make agent die (should use next position on path, not position on path)

>>eval
opponent_name	boost_near_resource	lux_perspective
boost_near_resource	0.000	30.357
lux_perspective	69.643	0.000


* Optimize the search algorithm: add waiting on city path

opponent_name	boost_near_resource	lux_perspective
boost_near_resource	0.000	21.622
lux_perspective	81.081	0.000


X Try skip build city boost for cluster boost worker
* Add small weight for city

* [Fix] near_resource_tile: use it even it's not reseached. No need to check reached for near resource tile
* [Fix] research points growth use citytile, not city
* Estimate to the end of day time this round or unit arrival turns

Total Matches: 22 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | 4CKKG4BqBnOo   | 20.5313804      | μ=30.603, σ=3.357  | 22
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | 69BdySuYM0XI   | 9.3244231       | μ=19.397, σ=3.357  | 22

opponent_name	boost_near_resource	lux_perspective
boost_near_resource	0.000	  4.762
lux_perspective	    95.238	0.000


* Boost the values for dying worker (save it from dying)
([Fix] Fix resoruce tile save worker from near resoruce tile.)

Total Matches: 126 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | 93BSGxynL3I8   | 26.3699693      | μ=29.551, σ=1.060  | 126
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | RM6Cz85QmG9y   | 17.2676592      | μ=20.449, σ=1.060  | 126

win_loss	win	loss
boost_near_resource	0.095	0.905
lux_perspective	0.905	0.095


Total Matches: 329 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | cTyNYJOXnV2v   | 28.3922142      | μ=31.144, σ=0.917  | 152
/Users/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | TRxlQlSmdQh0   | 28.0149808      | μ=30.765, σ=0.917  | 148
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | dQeoN3Drvwa8   | 24.6459114      | μ=27.341, σ=0.898  | 123
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | cmMXeKkBtB2b   | 18.8239661      | μ=21.833, σ=1.003  | 116
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | 8Hzc3RTeCzT1   | 17.0155245      | μ=20.199, σ=1.061  | 119

opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective	tranfer_agent_v1
Tong_Hui_Kang	0.000	36.000	14.286	3.125	8.571
boost_near_resource	64.000	0.000	36.842	5.882	5.556
explore_cluster	85.714	63.158	0.000	23.810	32.432
lux_perspective	96.875	94.118	76.190	0.000	52.632
tranfer_agent_v1	91.429	94.444	67.568	50.000	0.000




# 2021-09-14

* verify: use last turn and arrival_turns no regression

Total Matches: 230 | Matches Queued: 10
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | rr13kDcVjPCm   | 27.7679228      | μ=30.663, σ=0.965  | 126
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | bwPOxgs2wRq0   | 25.0028005      | μ=27.716, σ=0.905  | 132
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | o63ICWh25NfQ   | 21.0584183      | μ=23.971, σ=0.971  | 106
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | gOiIaUPXOrGc   | 18.0041670      | μ=21.404, σ=1.133  | 96

opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective
lux_perspective	93.750	86.842	65.455	0.000


Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | 6xCkyXkZSEJL   | 26.9735267      | μ=29.524, σ=0.850  | 402
/Users/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | XTGNIkGumlup   | 25.8120251      | μ=28.376, σ=0.855  | 433
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | HlFXOD1dtmmV   | 21.7806737      | μ=24.241, σ=0.820  | 385
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | 7lO8TCY7OEW9   | 17.7254238      | μ=20.303, σ=0.859  | 349
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | lSdQCNI52YGh   | 16.4273934      | μ=19.126, σ=0.900  | 327



# 2021-09-13

* add cell near city as target.

Total Matches: 429 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | vdOYoX49CNJq   | 25.1753266      | μ=27.615, σ=0.813  | 234
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | M3bmkebwG4Cx   | 25.0145022      | μ=27.452, σ=0.812  | 218
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | V0q7LGOpDy0b   | 20.9430865      | μ=23.375, σ=0.810  | 220
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | iKNww9lYVkHe   | 19.1461051      | μ=21.682, σ=0.845  | 186
opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective
Tong_Hui_Kang	0.000	30.769	18.644	20.968
boost_near_resource	69.231	0.000	27.143	24.390
explore_cluster	81.356	72.857	0.000	44.828
lux_perspective	79.032	75.610	55.172	0.000


* check transfer condition and do transfer.
* WIP do not goto the cell of a transfer action worker
* Do not send money to citytile, but build

Total Matches: 198 | Matches Queued: 10
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | rKWMEoftKxLP   | 25.4902518      | μ=28.230, σ=0.913  | 105
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | 6tlVPTUCce9a   | 23.9821881      | μ=26.720, σ=0.913  | 103
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | nmsDh2ZwEu1c   | 22.4263394      | μ=25.188, σ=0.921  | 98
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | F3NuuZ1BN8Ja   | 18.1242076      | μ=21.228, σ=1.035  | 90

opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective
Tong_Hui_Kang	0.000	16.000	21.875	18.750
boost_near_resource	88.000	0.000	38.889	30.556
explore_cluster	78.125	61.111	0.000	42.857
lux_perspective	81.250	69.444	57.143	0.000


WIP
* save more citytiles, how to move at night: need to consider city assingment.

Total Matches: 224 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | 2kzojOcDHJ6N   | 25.1049731      | μ=27.890, σ=0.928  | 104
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | JGyLxWmBdbps   | 24.4152954      | μ=27.142, σ=0.909  | 116
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | 21jnhfG9PXYJ   | 20.9467166      | μ=23.598, σ=0.884  | 116
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | SRKabI4NF0S3   | 17.7132924      | μ=20.576, σ=0.954  | 112

opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective
Tong_Hui_Kang	0.000	36.842	8.889	18.750
boost_near_resource	65.789	0.000	36.585	22.500
explore_cluster	91.111	63.415	0.000	50.000
lux_perspective	81.250	77.500	52.941	0.000


* Assign maximum amount of resource worker per cluster.
* debug 437892541 at turn 49, worker going back.
* debug u_5 goto (6, 28) at turn 16: boost cluster weight not right.
* keep cluster assignment even it's conflict with citytile assignment.
* issue 1: why move out of city and wait.
* issue 2: why not stay in the city?
* do not move onto build action unit.


* Sorted transfer grid.
* Do not tranfer more times
* Do not pull cluster explore worker back for city building.
* Transfer worker not move onto transfer locations (across multiple turns)
* split different type cluster
* Move to coal and uranimu earlier (Estimate research points)
* dist=2 woker not moving back to city (because of round limit, >=28)
* [bugfix] map:371000968, initial round not moving


(major release for agent with tranfer function)
Total Matches: 289 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | 2HVr21WetP0P   | 27.1547770      | μ=29.974, σ=0.940  | 157
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | 0X4tg6Oa39HM   | 23.2028640      | μ=25.797, σ=0.865  | 143
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | 4GafAqRR7UJg   | 21.0124892      | μ=23.653, σ=0.880  | 137
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | wMQ0NSMIK3UK   | 17.2696384      | μ=20.208, σ=0.980  | 141


opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective
Tong_Hui_Kang	0.000	30.000	17.647	4.000
boost_near_resource	70.000	0.000	42.857	14.286
explore_cluster	82.353	59.524	0.000	30.189
lux_perspective	96.000	85.714	71.698	0.000



* test drop n_resource_tile <= 1 check

Total Matches: 217 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | FvkTMpDoVVRg   | 25.2861051      | μ=28.157, σ=0.957  | 116
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | 2QXMnNXpSRqE   | 24.1743905      | μ=26.919, σ=0.915  | 108
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | hi3ywdsMnbtt   | 19.3622050      | μ=22.176, σ=0.938  | 114
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | 4nntiwyXbeL3   | 15.9842726      | μ=19.131, σ=1.049  | 96

opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective
lux_perspective	90.323	88.372	59.524	0.000

* test drop n_resource_tile <= 1 check only for wood cluster

Total Matches: 159 | Matches Queued: 9
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | 3xwm7NVrAiVY   | 27.3786076      | μ=30.522, σ=1.048  | 89
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | buDOaMsi8VN1   | 25.9196927      | μ=28.896, σ=0.992  | 83
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | WxnlD8cR5SgN   | 24.4332307      | μ=27.553, σ=1.040  | 76
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | DLWlvPNyg4oX   | 17.0075096      | μ=20.961, σ=1.318  | 70

opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective
lux_perspective	93.103	79.310	56.667	0.000



* Drop MAX_EXPLORE_WORKE

opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	tranfer_agent_v1
tranfer_agent_v1	96.000	95.833	73.684	0.000

Total Matches: 176 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/tranfer_agent_v1/main.py | npEQBEmZ3GMP   | 27.1199295      | μ=30.689, σ=1.190  | 88
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | 7HFJpzctGTyo   | 23.9343353      | μ=26.888, σ=0.985  | 94
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | s8i1fq2l2T3A   | 19.3687370      | μ=22.469, σ=1.033  | 86
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | O8jjBFm8gXHZ   | 17.2644057      | μ=20.487, σ=1.074  | 84



# 2021-09-08

* make can_not_act worker weight as MAX when compute next move
* make enemy citytile weight as MAX when compute next move
* boost city weight when cargo is full
* Try fix step move weight -1 issue on map 258834615

Total Matches: 218 | Matches Queued: 10
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | cwM0goq3Vqeu   | 24.7388388      | μ=27.358, σ=0.873  | 114
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | y7egVymUYvhE   | 24.5274083      | μ=27.111, σ=0.861  | 115
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | aKNSomUVRuBP   | 23.2311555      | μ=25.854, σ=0.874  | 108
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | fBxW63XFzStt   | 20.7812039      | μ=23.538, σ=0.919  | 99

* Build city ASAP for cluster targeted worker
* If worker is build city, do not move onto it.

Total Matches: 169 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | uSTvajCPIGaD   | 25.7304544      | μ=28.698, σ=0.989  | 83
/Users/flynnwang/dev/playground/lux_perspective/main.py | 3LP0kv1D7VvJ   | 25.3548629      | μ=28.472, σ=1.039  | 99
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | xnHS9Ly4RxVx   | 21.1616515      | μ=24.181, σ=1.006  | 80
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | L0heUIpoL2BU   | 15.4124924      | μ=19.353, σ=1.313  | 76

              Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective
Tong_Hui_Kang	0.000	31.579	11.111	2.500
boost_near_resource	68.421	0.000	44.444	17.857
explore_cluster	88.889	55.556	0.000	56.250
lux_perspective	97.500	82.143	43.750	0.000


* Weight minor fine turne

Total Matches: 229 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | vvuFeE7iPIUC   | 24.1393799      | μ=26.848, σ=0.903  | 120
/Users/flynnwang/dev/playground/lux_perspective/main.py | Suop9KYQEfBt   | 23.6382103      | μ=26.349, σ=0.904  | 124
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | tRldXNMBtEqV   | 22.0345814      | μ=24.788, σ=0.918  | 105
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | XnaxKcena1GX   | 16.5911762      | μ=19.755, σ=1.055  | 109

              Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective
Tong_Hui_Kang	0.000	12.500	11.765	18.182
boost_near_resource	87.500	0.000	39.474	32.258
explore_cluster	88.235	60.526	0.000	36.111
lux_perspective	81.818	67.742	63.889	0.000



* inc cluster worker size: max 2

Total Matches: 194 | Matches Queued: 10
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | klbSKQ3a28RX   | 25.1380534      | μ=27.982, σ=0.948  | 104
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | JbvqNMIN0bRw   | 25.0708927      | μ=28.000, σ=0.976  | 88
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | XnGjALxtJwc9   | 22.3521659      | μ=25.086, σ=0.911  | 112
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | 83xlVo9Vpf3D   | 16.2076697      | μ=19.628, σ=1.140  | 84

opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective
Tong_Hui_Kang	0.000	20.588	13.043	11.111
boost_near_resource	79.412	0.000	33.333	26.667
explore_cluster	86.957	69.697	0.000	56.250
lux_perspective	88.889	73.333	43.750	0.000


* skip cluster of size 1

Total Matches: 270 | Matches Queued: 10
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | BYVUalOHJz5b   | 26.4605247      | μ=29.056, σ=0.865  | 149
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | wO3kMI3abafW   | 26.0020502      | μ=28.598, σ=0.865  | 138
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | le69vocfJhvW   | 21.1001041      | μ=23.731, σ=0.877  | 132
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | LGHZsV0kPG2o   | 19.5473273      | μ=22.359, σ=0.937  | 121

opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective
Tong_Hui_Kang	0.000	31.250	16.667	17.391
boost_near_resource	68.750	0.000	23.913	20.000
explore_cluster	83.333	76.087	0.000	48.980
lux_perspective	82.609	80.000	53.061	0.000

* skip cluster boost score if agent is near, plus increase cluster boost weight.

Total Matches: 131 | Matches Queued: 9
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | htbZxpFPDcVb   | 26.8438998      | μ=30.342, σ=1.166  | 64
/Users/flynnwang/dev/playground/lux_perspective/main.py | MyVUq23rwLNw   | 24.3988374      | μ=27.685, σ=1.095  | 70
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | mQ11xyBqMToG   | 21.5036317      | μ=24.772, σ=1.089  | 69
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | 3WFyfjllP2p8   | 15.3937309      | μ=19.473, σ=1.360  | 59

opponent_name	Tong_Hui_Kang	boost_near_resource	explore_cluster	lux_perspective
Tong_Hui_Kang	0.000	36.364	0.000	5.263
boost_near_resource	63.636	0.000	41.176	10.526
explore_cluster	100.000	58.824	0.000	70.588
lux_perspective	94.737	89.474	29.412	0.000


## 2021-09-07

* Add cluster task assignment.

Total Matches: 310 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | dZWx98fVYhLF   | 23.8722553      | μ=26.287, σ=0.805  | 211
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | cPzlOXvKfqqp   | 21.1380997      | μ=23.527, σ=0.796  | 207
/Users/flynnwang/dev/playground/versions/fast_city_far_resource/main.py | 52QGdnzOVOqe   | 20.7752570      | μ=23.165, σ=0.797  | 202


* Update unit step prioripy, only boost for next position in shortest path.
* Limit max worker to build, but not limit citytile

Total Matches: 350 | Matches Queued: 9
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | GzG6aOM4Znxq   | 25.5647316      | μ=28.050, σ=0.828  | 234
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | PPJz8rGibznN   | 21.4861582      | μ=23.877, σ=0.797  | 233
/Users/flynnwang/dev/playground/versions/fast_city_far_resource/main.py | 8ZmeZPyjj220   | 20.3470058      | μ=22.787, σ=0.813  | 233

Total Matches: 296 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/explore_cluster/main.py | dNpiQvFtPzbl   | 26.3496491      | μ=28.999, σ=0.883  | 151
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | hb9D9m1v0fly   | 22.0345976      | μ=24.492, σ=0.819  | 168
/Users/flynnwang/dev/playground/versions/fast_city_far_resource/main.py | F5RczBnS48Gv   | 20.7976869      | μ=23.340, σ=0.847  | 142
/Users/flynnwang/dev/playground/versions/Tong_Hui_Kang/main.py | mJPpfoMrjpWF   | 18.6338814      | μ=21.295, σ=0.887  | 131



## 2021-09-06


* Limit maximum amount when compute resource weight
* Bugfix on worker_enough_cargo_to_build() from fuel to amount
* Support Dying woker weights on global and local moves.
* Check near_resource_tile target blocked by citytile.
* Only pass through enemy unit which can't act (but not player unit)
* Try lower city tile boost value for full cargo worker: 1
* Raise default weight 0.1 for any resource tile

Total Matches: 443 | Matches Queued: 11
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/fast_city_far_resource/main.py | W4frPn0iVPSo   | 25.2599588      | μ=27.776, σ=0.839  | 443
/Users/flynnwang/dev/playground/lux_perspective/main.py | lmojnyTBNFB9   | 19.7072696      | μ=22.224, σ=0.839  | 443


* Fix resource.amount
Total Matches: 107 | Matches Queued: 11
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/fast_city_far_resource/main.py | VitC7Rawf5Ee   | 24.4715737      | μ=27.310, σ=0.946  | 107
/Users/flynnwang/dev/playground/lux_perspective/main.py | rSHgEc2FvHXq   | 19.8509722      | μ=22.690, σ=0.946  | 107


* Only build city tile before 24
* Move to citytile to save city giving 20+ boost
* use small decay for resource (encourge explore)

Total Matches: 66 | Matches Queued: 8
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/fast_city_far_resource/main.py | VbMmNeBaaAdN   | 24.3048438      | μ=28.020, σ=1.238  | 66
/Users/flynnwang/dev/playground/lux_perspective/main.py | hh4J08m8A17j   | 18.2643310      | μ=21.980, σ=1.238  | 66


* Drop the boost weight for near resource tile.
* Boost step planning of resource mining worker


Total Matches: 208 | Matches Queued: 7
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/fast_city_far_resource/main.py | QXETR4JVggnF   | 22.3338552      | μ=24.803, σ=0.823  | 138
/Users/flynnwang/dev/playground/versions/boost_near_resource/main.py | 7fpP0QuD1NfG   | 22.0795301      | μ=24.528, σ=0.816  | 145
/Users/flynnwang/dev/playground/lux_perspective/main.py | XHAa2mYP3c1D   | 21.4132871      | μ=23.895, σ=0.827  | 133


* In left round (24-30), save city as possible.



## 2021-09-03


* limit research point to 200 and build worker with new citytiles.
* try strategy Toad
* Only focus on near resource tile for building


Total Matches: 131 | Matches Queued: 19
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/fast_city_far_resource/main.py | 1eJKYDLxJr9B   | 24.1486851      | μ=26.726, σ=0.859  | 131
/Users/flynnwang/dev/playground/lux_perspective/main.py | 4UwG826nuJ9d   | 20.6959079      | μ=23.274, σ=0.859  | 131


* Use collect amount to define resource weight
* Skip citytile during night

Total Matches: 22 | Matches Queued: 18
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/fast_city_far_resource/main.py | QCSlghFk3qpd   | 21.2978680      | μ=28.406, σ=2.369  | 22
/Users/flynnwang/dev/playground/lux_perspective/main.py | OOC4EmHMBWW0   | 14.4867675      | μ=21.594, σ=2.369  | 22


* use collect amount X fuel rate, revert night forbidden_positions.

Total Matches: 41 | Matches Queued: 19
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/fast_city_far_resource/main.py | HCmof1oX6QfD   | 23.0505634      | μ=27.061, σ=1.337  | 41
/Users/flynnwang/dev/playground/lux_perspective/main.py | 59h0nB9ntfen   | 18.9291842      | μ=22.939, σ=1.337  | 41


* revert night weights

Total Matches: 44 | Matches Queued: 20
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/fast_city_far_resource/main.py | XA6yt0G6RDpw   | 22.9055557      | μ=26.636, σ=1.244  | 44
/Users/flynnwang/dev/playground/lux_perspective/main.py | hhED6DV4wMVJ   | 19.6328387      | μ=23.364, σ=1.244  | 44


* Move to city that will last at night

Total Matches: 109 | Matches Queued: 19
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/fast_city_far_resource/main.py | j3bqdqRms2Et   | 23.4153534      | μ=26.061, σ=0.882  | 109
/Users/flynnwang/dev/playground/lux_perspective/main.py | a4ymKWS0ZTjP   | 21.2940286      | μ=23.939, σ=0.882  | 109


* Use near resource tile cell value with worker cargo to boost its weight

Tournament - ID: roq9bF, Name: Lux AI Season 1 Tournament | Dimension - ID: GMvRXx, Name: Lux
Status: running | Competitors: 2 | Rank System: trueskill

Total Matches: 64 | Matches Queued: 20
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/fast_city_far_resource/main.py | 83Rj0D3ZYg8A   | 22.3923900      | μ=25.528, σ=1.045  | 64
/Users/flynnwang/dev/playground/lux_perspective/main.py | 2ewpYlZUbSVn   | 21.3372860      | μ=24.472, σ=1.045  | 64


* Use large decay factor

Total Matches: 154 | Matches Queued: 20
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/fast_city_far_resource/main.py | u6Oq3aWODJLH   | 22.7478724      | μ=25.172, σ=0.808  | 154
/Users/flynnwang/dev/playground/lux_perspective/main.py | ASqGYeEaxAY0   | 22.4036758      | μ=24.828, σ=0.808  | 154



# 2021-09-01
* Test BUILD_CITYTILE_ROUND = 24
* use neighbour 9 for citytile buidling
* add weight for citytile if it won't last in night

* change distance decay, lower city tile weight
* Build city (near resource tile) as fast as possible

Total Matches: 46 | Matches Queued: 21
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | 3Jy8n7beiwHu   | 22.1920000      | μ=26.087, σ=1.298  | 46
/Users/flynnwang/dev/playground/versions/count_worker_night/main.py | uVU80xzPKObH   | 20.0176943      | μ=23.913, σ=1.298  | 46

* [revert] Goto city that will last.

Total Matches: 35 | Matches Queued: 22
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/versions/fast_city_far_resource/main.py | ZMzTU6l9Ouc6   | 21.9197191      | μ=26.046, σ=1.376  | 35
/Users/flynnwang/dev/playground/lux_perspective/main.py | AzuetvwJAIRi   | 19.8268789      | μ=23.954, σ=1.376  | 35


# 2021-08-31

* Do not go into far away target and die at night

Total Matches: 105 | Matches Queued: 24
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | c3UvME34GbrO   | 26.2389458      | μ=29.739, σ=1.167  | 71
/Users/flynnwang/dev/playground/versions/shortest_path_v1/main.py | Aqp14o9ATAwU   | 21.0346771      | μ=24.237, σ=1.067  | 69
/Users/flynnwang/dev/playground/versions/more_citytile_20/main.py | hyUiGmJTOKsn   | 18.9588067      | μ=22.226, σ=1.089  | 70


# 2021-08-30

* Use shortesestt path dist instead of manhatten dist.

Total Matches: 286 | Matches Queued: 26
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | i3TIgPf8G4HP   | 29.7988206      | μ=32.627, σ=0.943  | 133
/Users/flynnwang/dev/playground/versions/more_citytile_10/main.py | NvdxD71BcyyN   | 24.9904737      | μ=27.535, σ=0.848  | 160
/Users/flynnwang/dev/playground/versions/more_citytile_15/main.py | jzZjGQMr3cAv   | 24.4053658      | μ=26.986, σ=0.860  | 152
/Users/flynnwang/dev/playground/versions/baseline/main.py | 4GG7er6PpZ7P   | 18.4686148      | μ=21.431, σ=0.988  | 127


baseline v1:

* Use weight from neighbour cells.

Total Matches: 133 | Matches Queued: 23
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | bAZPIByJrrly   | 22.8821893      | μ=25.362, σ=0.827  | 133
/Users/flynnwang/dev/playground/versions/baseline/main.py | JSvzlKU6kPpq   | 22.1575826      | μ=24.638, σ=0.827  | 133

* Create more city tile at the beginning of each day.

Total Matches: 162 | Matches Queued: 16
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | SoNqAJvguMFz   | 24.8074356      | μ=27.415, σ=0.869  | 162
/Users/flynnwang/dev/playground/versions/baseline/main.py | yhBRbJiXz1du   | 19.9770905      | μ=22.585, σ=0.869  | 162

* try select build city tile round

Total Matches: 105 | Matches Queued: 23
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | aIUgNAlWRf6l   | 25.6763579      | μ=29.523, σ=1.282  | 54
/Users/flynnwang/dev/playground/versions/more_citytile_10/main.py | Nwjp93nH0Dig   | 24.8476294      | μ=28.452, σ=1.201  | 52
/Users/flynnwang/dev/playground/versions/more_citytile_15/main.py | 5NIvUe6McWdM   | 24.5985483      | μ=28.261, σ=1.221  | 53
/Users/flynnwang/dev/playground/versions/baseline/main.py | n5j4hTZO5Jga   | 17.2385194      | μ=21.729, σ=1.497  | 51


* Try discount city build locations

Total Matches: 304 | Matches Queued: 24
Name                           | ID             | Score=(μ - 3σ)  | Mu: μ, Sigma: σ    | Matches
/Users/flynnwang/dev/playground/lux_perspective/main.py | dY2BQ6aBQEsE   | 26.9468698      | μ=29.538, σ=0.864  | 159
/Users/flynnwang/dev/playground/versions/more_citytile_15/main.py | LzXJknmxl5ar   | 23.7341977      | μ=26.216, σ=0.827  | 166
/Users/flynnwang/dev/playground/versions/more_citytile_10/main.py | lO7Lp3xbq8tl   | 23.5424299      | μ=26.064, σ=0.841  | 157
/Users/flynnwang/dev/playground/versions/baseline/main.py | b4d6I9JwuPDu   | 15.9079358      | μ=18.953, σ=1.015  | 126



